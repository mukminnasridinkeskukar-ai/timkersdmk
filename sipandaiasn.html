<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIPANDAI-ASN - Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light: #f8fafc;
            --dark: #1e293b;
            --sidebar-width: 260px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #f1f5f9;
            min-height: 100vh;
            display: flex;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--dark) 0%, #0f172a 100%);
            min-height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-header h1 {
            color: #fff;
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .sidebar-header span {
            color: var(--primary);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .sidebar-menu {
            padding: 15px 0;
        }

        .menu-item {
            position: relative;
        }

        .menu-title {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .menu-title:hover {
            background: rgba(255,255,255,0.05);
            color: #fff;
        }

        .menu-title.active {
            background: var(--primary);
            color: #fff;
        }

        .menu-title i {
            width: 25px;
            font-size: 1.1rem;
        }

        .menu-title span {
            flex: 1;
            margin-left: 10px;
        }

        .menu-title .arrow {
            transition: transform 0.3s;
        }

        .menu-item.submenu-active .arrow {
            transform: rotate(90deg);
        }

        .submenu {
            display: none;
            background: rgba(0,0,0,0.2);
        }

        .menu-item.submenu-active .submenu {
            display: block;
        }

        .submenu-item {
            display: flex;
            align-items: center;
            padding: 10px 20px 10px 55px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            text-decoration: none;
        }

        .submenu-item:hover {
            background: rgba(255,255,255,0.05);
            color: #fff;
        }

        .submenu-item.active {
            color: var(--primary);
            border-left: 3px solid var(--primary);
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 20px;
        }

        .header {
            background: #fff;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .header h2 {
            color: var(--dark);
            font-size: 1.5rem;
        }

        .header-user {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: 600;
        }

        /* Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .stat-icon.blue { background: #dbeafe; color: var(--primary); }
        .stat-icon.green { background: #d1fae5; color: var(--success); }
        .stat-icon.orange { background: #fed7aa; color: var(--warning); }
        .stat-icon.purple { background: #e9d5ff; color: #9333ea; }

        .stat-info h3 {
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .stat-info p {
            color: var(--secondary);
            font-size: 0.9rem;
        }

        /* Section Styles */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Tables */
        .table-container {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .table-header {
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-header h3 {
            color: var(--dark);
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: #fff;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-success {
            background: var(--success);
            color: #fff;
        }

        .btn-danger {
            background: var(--danger);
            color: #fff;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: #fff;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px 20px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: #f8fafc;
            color: var(--secondary);
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
        }

        tr:hover {
            background: #f8fafc;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-active {
            background: #d1fae5;
            color: #065f46;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Forms */
        .form-container {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
        }

        .form-title {
            color: var(--dark);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group.full-width {
            grid-column: span 2;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-group .required {
            color: var(--danger);
        }

        .form-actions {
            margin-top: 25px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* Login Form */
        .login-container {
            max-width: 400px;
            margin: 50px auto;
            background: #fff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
        }

        .login-container h2 {
            color: var(--dark);
            margin-bottom: 10px;
        }

        .login-container p {
            color: var(--secondary);
            margin-bottom: 30px;
        }

        .login-error {
            color: var(--danger);
            font-size: 0.9rem;
            margin-top: 10px;
            display: none;
        }

        /* Admin Cards */
        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .admin-card {
            background: #fff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .admin-card h3 {
            color: var(--dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-card h3 i {
            color: var(--primary);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: #fff;
            font-weight: 500;
            z-index: 9999;
            transform: translateX(400px);
            transition: transform 0.3s;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: var(--success);
        }

        .toast.error {
            background: var(--danger);
        }

        .toast.info {
            background: var(--primary);
        }

        /* Admin Logout */
        .admin-logout {
            display: none;
        }

        .admin-logout.show {
            display: block;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
            }

            .sidebar-header h1,
            .menu-title span,
            .arrow {
                display: none;
            }

            .main-content {
                margin-left: 70px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .form-group.full-width {
                grid-column: span 1;
            }
        }

        /* Dashboard Charts Placeholder */
        .chart-container {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .chart-placeholder {
            height: 200px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
        }

        .activity-list {
            list-style: none;
        }

        .activity-item {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #dbeafe;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .activity-info h4 {
            color: var(--dark);
            font-size: 0.95rem;
            margin-bottom: 3px;
        }

        .activity-info p {
            color: var(--secondary);
            font-size: 0.85rem;
        }

        /* Data Tables in Admin */
        .admin-tables {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .data-table {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .data-table h4 {
            padding: 15px 20px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            color: var(--dark);
            font-size: 1rem;
        }

        .data-table table {
            font-size: 0.85rem;
        }

        .data-table th, .data-table td {
            padding: 10px 15px;
        }

        .action-btns {
            display: flex;
            gap: 5px;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 0.8rem;
        }

        /* Hidden sections */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <h1>SIPANDAI</h1>
            <span>ASN</span>
        </div>
        <div class="sidebar-menu">
            <!-- Dashboard Menu -->
            <div class="menu-item submenu-active">
                <a href="#" class="menu-title" onclick="showSection('dashboard')">
                    <i class="fas fa-th-large"></i>
                    <span>Dashboard</span>
                    <i class="fas fa-chevron-right arrow"></i>
                </a>
                <div class="submenu">
                    <a href="#" class="submenu-item active" onclick="showSubSection('dashboard-kegagalan')">
                        <i class="fas fa-calendar-alt"></i> Dashboard Kegiatan
                    </a>
                    <a href="#" class="submenu-item" onclick="showSubSection('dashboard-materi')">
                        <i class="fas fa-book"></i> Dashboard Materi
                    </a>
                    <a href="#" class="submenu-item" onclick="showSubSection('dashboard-sertifikat')">
                        <i class="fas fa-certificate"></i> Dashboard Sertifikat
                    </a>
                </div>
            </div>

            <!-- Pendaftaran Menu -->
            <div class="menu-item">
                <a href="#" class="menu-title" onclick="showSection('pendaftaran')">
                    <i class="fas fa-user-plus"></i>
                    <span>Pendaftaran</span>
                    <i class="fas fa-chevron-right arrow"></i>
                </a>
                <div class="submenu">
                    <a href="#" class="submenu-item" onclick="showSubSection('form-pendaftaran')">
                        <i class="fas fa-file-alt"></i> Formulir Pendaftaran
                    </a>
                    <a href="#" class="submenu-item" onclick="showSubSection('absensi')">
                        <i class="fas fa-clipboard-check"></i> Absensi
                    </a>
                </div>
            </div>

            <!-- Admin Menu -->
            <div class="menu-item">
                <a href="#" class="menu-title" onclick="showSection('admin')">
                    <i class="fas fa-cog"></i>
                    <span>Admin</span>
                    <i class="fas fa-chevron-right arrow"></i>
                </a>
                <div class="submenu">
                    <a href="#" class="submenu-item" onclick="showSubSection('input-kegagalan')">
                        <i class="fas fa-plus-circle"></i> Input Data Kegiatan
                    </a>
                    <a href="#" class="submenu-item" onclick="showSubSection('input-materi')">
                        <i class="fas fa-book-open"></i> Input Data Materi
                    </a>
                    <a href="#" class="submenu-item" onclick="showSubSection('input-sertifikat')">
                        <i class="fas fa-award"></i> Input Data Sertifikat
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <header class="header">
            <h2 id="page-title">Dashboard Kegiatan</h2>
            <div class="header-user">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <span id="user-display">User</span>
                <button id="admin-logout-btn" class="admin-logout btn btn-danger btn-sm" onclick="logoutAdmin()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <!-- Dashboard Kegiatan -->
            <div id="dashboard-kegagalan" class="subsection active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-kegagalan">0</h3>
                            <p>Total Kegiatan</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-peserta">0</h3>
                            <p>Total Peserta</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-jp">0</h3>
                            <p>JP Diselesaikan</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon purple">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-webinar">0</h3>
                            <p>Webinar Aktif</p>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 style="margin-bottom: 15px; color: var(--dark);">Statistik Kegiatan per Bulan</h3>
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-line" style="font-size: 3rem; margin-right: 15px;"></i>
                        <span>Grafik kegiatan akan ditampilkan di sini</span>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h3>Recent Activities</h3>
                    </div>
                    <ul class="activity-list" id="recent-activities">
                        <li class="activity-item">
                            <div class="activity-icon"><i class="fas fa-video"></i></div>
                            <div class="activity-info">
                                <h4>Belum ada kegiatan</h4>
                                <p>Silakan input data kegiatan melalui menu Admin</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Dashboard Materi -->
            <div id="dashboard-materi" class="subsection">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-materi">0</h3>
                            <p>Total Materi</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="stat-info">
                            <h3>0</h3>
                            <p>Dokumen PDF</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3>0</h3>
                            <p>Video Tutorial</p>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h3>Daftar Materi</h3>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Tanggal Kegiatan</th>
                                <th>Tema</th>
                                <th>Narasumber</th>
                                <th>Link Download</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="materi-table-body">
                            <tr>
                                <td colspan="6" style="text-align: center; color: var(--secondary);">Belum ada data materi</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Dashboard Sertifikat -->
            <div id="dashboard-sertifikat" class="subsection">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-certificate"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-sertifikat">0</h3>
                            <p>Sertifikat Terbit</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3>0</h3>
                            <p>Tervalidasi</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-hourglass-half"></i>
                        </div>
                        <div class="stat-info">
                            <h3>0</h3>
                            <p>Pending</p>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h3>Daftar Sertifikat</h3>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Nama Peserta</th>
                                <th>Unit Kerja</th>
                                <th>Tanggal Kegiatan</th>
                                <th>Tema</th>
                                <th>JP</th>
                                <th>Link Download</th>
                            </tr>
                        </thead>
                        <tbody id="sertifikat-table-body">
                            <tr>
                                <td colspan="7" style="text-align: center; color: var(--secondary);">Belum ada data sertifikat</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Pendaftaran Section -->
        <section id="pendaftaran" class="section">
            <!-- Formulir Pendaftaran -->
            <div id="form-pendaftaran" class="subsection">
                <div class="form-container">
                    <h2 class="form-title">Formulir Pendaftaran SIPANDAI-ASN</h2>
                    <form id="registration-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Nama Lengkap <span class="required">*</span></label>
                                <input type="text" id="nama-lengkap" name="nama_lengkap" required placeholder="Masukkan nama lengkap">
                            </div>
                            <div class="form-group">
                                <label>NIP <span class="required">*</span></label>
                                <input type="text" id="nip" name="nip" required placeholder="Masukkan NIP" maxlength="18">
                            </div>
                            <div class="form-group">
                                <label>Unit Kerja</label>
                                <select id="unit-kerja" name="unit_kerja">
                                    <option value="">Pilih Unit Kerja</option>
                                    <option value="Sekretariat Daerah">Sekretariat Daerah</option>
                                    <option value="Dinas Pendidikan">Dinas Pendidikan</option>
                                    <option value="Dinas Kesehatan">Dinas Kesehatan</option>
                                    <option value="Dinas PU">Dinas PU</option>
                                    <option value="Dinas Sosial">Dinas Sosial</option>
                                    <option value="Kecamatan">Kecamatan</option>
                                    <option value="Kelurahan">Kelurahan</option>
                                    <option value="Lainnya">Lainnya</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Status Pegawai</label>
                                <select id="status-pegawai" name="status_pegawai">
                                    <option value="">Pilih Status</option>
                                    <option value="PNS">PNS</option>
                                    <option value="PPPK">PPPK</option>
                                    <option value="Honorer">Honorer</option>
                                    <option value="Kontrak">Kontrak</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Jenis SDMK</label>
                                <select id="jenis-sdmk" name="jenis_sdmk">
                                    <option value="">Pilih Jenis SDMK</option>
                                    <option value="Tenaga Kesehatan">Tenaga Kesehatan</option>
                                    <option value="Tenaga Pendidikan">Tenaga Pendidikan</option>
                                    <option value="Tenaga Administrasi">Tenaga Administrasi</option>
                                    <option value="Tenaga Teknis">Tenaga Teknis</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Jumlah JP Terakhir</label>
                                <input type="number" id="jp-terakhir" name="jp_terakhir" placeholder="Masukkan jumlah JP" min="0">
                            </div>
                            <div class="form-group">
                                <label>Nomor WhatsApp <span class="required">*</span></label>
                                <input type="tel" id="whatsapp" name="whatsapp" required placeholder="Contoh: 081234567890">
                            </div>
                            <div class="form-group">
                                <label>Email <span class="required">*</span></label>
                                <input type="email" id="email" name="email" required placeholder="contoh@email.com">
                            </div>
                            <div class="form-group">
                                <label>Tema Pembelajaran <span class="required">*</span></label>
                                <input type="text" id="tema-pembelajaran" name="tema_pembelajaran" required placeholder="Masukkan tema pembelajaran">
                            </div>
                            <div class="form-group">
                                <label>Narasumber</label>
                                <input type="text" id="narasumber" name="narasumber" placeholder="Masukkan nama narasumber">
                            </div>
                            <div class="form-group">
                                <label>Tanggal Kegiatan <span class="required">*</span></label>
                                <input type="date" id="tanggal-kegagalan" name="tanggal_kegagalan" required>
                            </div>
                            <div class="form-group">
                                <label>Waktu Kegiatan <span class="required">*</span></label>
                                <input type="time" id="waktu-kegagalan" name="waktu_kegagalan" required>
                            </div>
                            <div class="form-group">
                                <label>Platform Digital</label>
                                <select id="platform-digital" name="platform_digital">
                                    <option value="">Pilih Platform</option>
                                    <option value="Zoom">Zoom</option>
                                    <option value="Google Meet">Google Meet</option>
                                    <option value="Microsoft Teams">Microsoft Teams</option>
                                    <option value="YouTube Live">YouTube Live</option>
                                    <option value="Lainnya">Lainnya</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>JP (Jam Pelajaran) <span class="required">*</span></label>
                                <input type="number" id="jp" name="jp" required placeholder="Masukkan jumlah JP" min="1">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-danger" onclick="resetForm()">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Simpan
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Absensi -->
            <div id="absensi" class="subsection">
                <!-- Login Form for Attendance -->
                <div id="absensi-login" class="login-container">
                    <h2><i class="fas fa-clipboard-check" style="color: var(--primary); margin-bottom: 15px;"></i></h2>
                    <h2>Login Absensi</h2>
                    <p>Masukkan email dan NIP yang digunakan saat pendaftaran</p>
                    <form id="absensi-login-form">
                        <div class="form-group">
                            <label style="text-align: left;">Email <span class="required">*</span></label>
                            <input type="email" id="absensi-email" required placeholder="Email terdaftar">
                        </div>
                        <div class="form-group">
                            <label style="text-align: left;">NIP <span class="required">*</span></label>
                            <input type="text" id="absensi-nip" required placeholder="NIP terdaftar" maxlength="18">
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </form>
                </div>

                <!-- Attendance Form (Hidden until login) -->
                <div id="absensi-form" class="form-container hidden">
                    <h2 class="form-title">Formulir Absensi</h2>
                    <div id="user-info" style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <p><strong>Nama:</strong> <span id="display-nama"></span></p>
                        <p><strong>NIP:</strong> <span id="display-nip"></span></p>
                        <p><strong>Unit Kerja:</strong> <span id="display-unit"></span></p>
                    </div>
                    <form id="attendance-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Status Kehadiran <span class="required">*</span></label>
                                <select id="status-kehadiran" required>
                                    <option value="">Pilih Status</option>
                                    <option value="Hadir">Hadir</option>
                                    <option value="Izin">Izin</option>
                                    <option value="Sakit">Sakit</option>
                                    <option value="Alpha">Alpha</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Jam Masuk <span class="required">*</span></label>
                                <input type="time" id="jam-masuk" required>
                            </div>
                            <div class="form-group">
                                <label>Jam Keluar</label>
                                <input type="time" id="jam-keluar">
                            </div>
                            <div class="form-group full-width">
                                <label>Keterangan</label>
                                <textarea id="keterangan" placeholder="Masukkan keterangan jika ada..."></textarea>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-danger" onclick="logoutAbsensi()">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Simpan Absensi
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Admin Section -->
        <section id="admin" class="section">
            <!-- Admin Login -->
            <div id="admin-login" class="login-container">
                <h2><i class="fas fa-shield-alt" style="color: var(--primary); margin-bottom: 15px;"></i></h2>
                <h2>Login Admin</h2>
                <p>Masukkan username dan password untuk mengakses menu admin</p>
                <form id="admin-login-form">
                    <div class="form-group">
                        <label style="text-align: left;">Username <span class="required">*</span></label>
                        <input type="text" id="admin-username" required placeholder="Username">
                    </div>
                    <div class="form-group">
                        <label style="text-align: left;">Password <span class="required">*</span></label>
                        <input type="password" id="admin-password" required placeholder="Password">
                    </div>
                    <p id="login-error" class="login-error">Username atau password salah!</p>
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </form>
            </div>

            <!-- Admin Content (Hidden until login) -->
            <div id="admin-content" class="hidden">
                <!-- Input Data Kegiatan -->
                <div id="input-kegagalan" class="subsection">
                    <div class="form-container">
                        <h2 class="form-title">Input Data Kegiatan</h2>
                        <form id="kegagalan-form">
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label>Tema <span class="required">*</span></label>
                                    <input type="text" id="kegagalan-tema" required placeholder="Tema kegiatan">
                                </div>
                                <div class="form-group">
                                    <label>Tanggal <span class="required">*</span></label>
                                    <input type="date" id="kegagalan-tanggal" required>
                                </div>
                                <div class="form-group">
                                    <label>Jam Mulai <span class="required">*</span></label>
                                    <input type="time" id="kegagalan-jam-mulai" required>
                                </div>
                                <div class="form-group">
                                    <label>Jam Selesai <span class="required">*</span></label>
                                    <input type="time" id="kegagalan-jam-selesai" required>
                                </div>
                                <div class="form-group">
                                    <label>Narasumber</label>
                                    <input type="text" id="kegagalan-narasumber" placeholder="Nama narasumber">
                                </div>
                                <div class="form-group">
                                    <label>JP <span class="required">*</span></label>
                                    <input type="number" id="kegagalan-jp" required placeholder="Jumlah JP" min="1">
                                </div>
                                <div class="form-group">
                                    <label>Max Peserta</label>
                                    <input type="number" id="kegagalan-max-peserta" placeholder="Maksimal peserta" min="1">
                                </div>
                                <div class="form-group">
                                    <label>Tgl Mulai Daftar</label>
                                    <input type="date" id="kegagalan-tgl-mulai-daftar">
                                </div>
                                <div class="form-group">
                                    <label>Tgl Selesai Daftar</label>
                                    <input type="date" id="kegagalan-tgl-selesai-daftar">
                                </div>
                                <div class="form-group">
                                    <label>Status Aktif</label>
                                    <select id="kegagalan-is-active">
                                        <option value="1">Aktif</option>
                                        <option value="0">Tidak Aktif</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Simpan Kegiatan
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Input Data Materi -->
                <div id="input-materi" class="subsection">
                    <div class="form-container">
                        <h2 class="form-title">Input Data Materi</h2>
                        <form id="materi-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Tanggal Kegiatan <span class="required">*</span></label>
                                    <input type="date" id="materi-tanggal" required>
                                </div>
                                <div class="form-group">
                                    <label>Tema <span class="required">*</span></label>
                                    <input type="text" id="materi-tema" required placeholder="Tema materi">
                                </div>
                                <div class="form-group">
                                    <label>Narasumber</label>
                                    <input type="text" id="materi-narasumber" placeholder="Nama narasumber">
                                </div>
                                <div class="form-group full-width">
                                    <label>Link Download</label>
                                    <input type="url" id="materi-link" placeholder="https://...">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Simpan Materi
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Input Data Sertifikat -->
                <div id="input-sertifikat" class="subsection">
                    <div class="form-container">
                        <h2 class="form-title">Input Data Sertifikat</h2>
                        <form id="sertifikat-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Nama Peserta <span class="required">*</span></label>
                                    <input type="text" id="sertifikat-nama" required placeholder="Nama peserta">
                                </div>
                                <div class="form-group">
                                    <label>Unit Kerja</label>
                                    <input type="text" id="sertifikat-unit-kerja" placeholder="Unit kerja">
                                </div>
                                <div class="form-group">
                                    <label>Tanggal Kegiatan <span class="required">*</span></label>
                                    <input type="date" id="sertifikat-tanggal" required>
                                </div>
                                <div class="form-group">
                                    <label>Tema</label>
                                    <input type="text" id="sertifikat-tema" placeholder="Tema pelatihan">
                                </div>
                                <div class="form-group">
                                    <label>JP</label>
                                    <input type="number" id="sertifikat-jp" placeholder="Jumlah JP" min="1">
                                </div>
                                <div class="form-group full-width">
                                    <label>Link Download</label>
                                    <input type="url" id="sertifikat-link" placeholder="https://...">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Simpan Sertifikat
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // =====================================================
        // GOOGLE APPS SCRIPT CONFIGURATION
        // =====================================================
        // Ganti URL di bawah dengan URL Google Apps Script Web App Anda
        // Cara mendapatkan URL:
        // 1. Buka Google Apps Script
        // 2. Deploy sebagai Web App
        // 3. Copy URL yang diberikan
        // =====================================================
        const GOOGLE_SHEET_WEBAPP_URL = 'https://script.google.com/macros/s/AKfycbzjY5ANHuLMACKylPrpqo-uG6z2D2s631jUOX1w1mVzmLRseVFtrYUhV4I7NepoFzpYXA/exec';

        // Default admin credentials (ganti dengan kredensial yang diinginkan)
        const ADMIN_CREDENTIALS = {
            username: 'admin',
            password: 'sipandai123'
        };

        // =====================================================
        // DATA STORAGE (LOCAL STORAGE + GOOGLE SHEETS)
        // =====================================================
        let registeredUsers = JSON.parse(localStorage.getItem('sipandai_users')) || [];
        let kegiatanData = JSON.parse(localStorage.getItem('sipandai_kegagalan')) || [];
        let materiData = JSON.parse(localStorage.getItem('sipandai_materi')) || [];
        let sertifikatData = JSON.parse(localStorage.getItem('sipandai_sertifikat')) || [];
        let attendanceData = JSON.parse(localStorage.getItem('sipandai_attendance')) || [];

        // =====================================================
        // NAVIGATION FUNCTIONS
        // =====================================================
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            document.querySelectorAll('.menu-title').forEach(menu => {
                menu.classList.remove('active');
            });
            if (event && event.target) {
                event.target.classList.add('active');
            }

            const titles = {
                'dashboard': 'Dashboard',
                'pendaftaran': 'Pendaftaran',
                'admin': 'Admin'
            };
            document.getElementById('page-title').textContent = titles[sectionId];
        }

        function showSubSection(subsectionId) {
            const parentSection = event.target.closest('.section');
            if (parentSection) {
                parentSection.querySelectorAll('.subsection').forEach(sub => {
                    sub.classList.remove('active');
                });
                const targetSub = document.getElementById(subsectionId);
                if (targetSub) {
                    targetSub.classList.add('active');
                }
            }

            document.querySelectorAll('.submenu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');

            const titles = {
                'dashboard-kegagalan': 'Dashboard Kegiatan',
                'dashboard-materi': 'Dashboard Materi',
                'dashboard-sertifikat': 'Dashboard Sertifikat',
                'form-pendaftaran': 'Formulir Pendaftaran',
                'absensi': 'Absensi',
                'input-kegagalan': 'Input Data Kegiatan',
                'input-materi': 'Input Data Materi',
                'input-sertifikat': 'Input Data Sertifikat'
            };
            document.getElementById('page-title').textContent = titles[subsectionId] || 'Dashboard';
            
            // Refresh data displays
            if (subsectionId === 'dashboard-kegagalan') updateDashboardStats();
            if (subsectionId === 'dashboard-materi') updateMateriTable();
            if (subsectionId === 'dashboard-sertifikat') updateSertifikatTable();
        }

        // Toggle Submenu
        document.querySelectorAll('.menu-title').forEach(menu => {
            menu.addEventListener('click', function() {
                const parent = this.parentElement;
                parent.classList.toggle('submenu-active');
            });
        });

        // =====================================================
        // TOAST NOTIFICATIONS
        // =====================================================
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type + ' show';
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // =====================================================
        // GOOGLE SHEETS INTEGRATION
        // =====================================================
        async function sendToGoogleSheets(data, sheetType) {
            try {
                const response = await fetch(GOOGLE_SHEET_WEBAPP_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: sheetType,
                        data: data
                    })
                });
                console.log('Data sent to Google Sheets:', sheetType);
            } catch (error) {
                console.error('Error sending to Google Sheets:', error);
                // Data tersimpan di localStorage sebagai fallback
            }
        }

        // =====================================================
        // GENERATE ID
        // =====================================================
        function generateID() {
            const timestamp = Date.now().toString().slice(-6);
            return 'SIP-' + timestamp;
        }

        // =====================================================
        // REGISTRATION FORM
        // =====================================================
        document.getElementById('registration-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = {
                timestamp: new Date().toISOString(),
                id: generateID(),
                nama_lengkap: document.getElementById('nama-lengkap').value,
                nip: document.getElementById('nip').value,
                unit_kerja: document.getElementById('unit-kerja').value,
                status_pegawai: document.getElementById('status-pegawai').value,
                jenis_sdmk: document.getElementById('jenis-sdmk').value,
                jp_terakhir: document.getElementById('jp-terakhir').value,
                whatsapp: document.getElementById('whatsapp').value,
                email: document.getElementById('email').value,
                tema_pembelajaran: document.getElementById('tema-pembelajaran').value,
                narasumber: document.getElementById('narasumber').value,
                tanggal_kegagalan: document.getElementById('tanggal-kegagalan').value,
                waktu_kegagalan: document.getElementById('waktu-kegagalan').value,
                platform_digital: document.getElementById('platform-digital').value,
                jp: document.getElementById('jp').value
            };

            // Save to localStorage
            registeredUsers.push(formData);
            localStorage.setItem('sipandai_users', JSON.stringify(registeredUsers));

            // Send to Google Sheets
            sendToGoogleSheets(formData, 'pendaftaran');

            showToast('Pendaftaran berhasil! ID Anda: ' + formData.id, 'success');
            resetForm();
        });

        function resetForm() {
            document.getElementById('registration-form').reset();
        }

        // =====================================================
        // ABSENSI (ATTENDANCE)
        // =====================================================
        document.getElementById('absensi-login-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const email = document.getElementById('absensi-email').value;
            const nip = document.getElementById('absensi-nip').value;

            const user = registeredUsers.find(u => u.email === email && u.nip === nip);

            if (user) {
                document.getElementById('absensi-login').style.display = 'none';
                document.getElementById('absensi-form').classList.remove('hidden');
                
                document.getElementById('display-nama').textContent = user.nama_lengkap;
                document.getElementById('display-nip').textContent = user.nip;
                document.getElementById('display-unit').textContent = user.unit_kerja || '-';

                showToast('Login berhasil!', 'success');
            } else {
                showToast('Email atau NIP tidak ditemukan. Silakan lakukan pendaftaran terlebih dahulu.', 'error');
            }
        });

        function logoutAbsensi() {
            document.getElementById('absensi-login').style.display = 'block';
            document.getElementById('absensi-form').classList.add('hidden');
            document.getElementById('absensi-login-form').reset();
        }

        document.getElementById('attendance-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const attendanceRecord = {
                nip: document.getElementById('display-nip').textContent,
                nama: document.getElementById('display-nama').textContent,
                status_kehadiran: document.getElementById('status-kehadiran').value,
                jam_masuk: document.getElementById('jam-masuk').value,
                jam_keluar: document.getElementById('jam-keluar').value,
                keterangan: document.getElementById('keterangan').value,
                timestamp: new Date().toISOString()
            };

            attendanceData.push(attendanceRecord);
            localStorage.setItem('sipandai_attendance', JSON.stringify(attendanceData));

            sendToGoogleSheets(attendanceRecord, 'absensi');

            showToast('Absensi berhasil disimpan!', 'success');
            document.getElementById('attendance-form').reset();
        });

        // =====================================================
        // ADMIN LOGIN
        // =====================================================
        let isAdminLoggedIn = false;

        document.getElementById('admin-login-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;

            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                isAdminLoggedIn = true;
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-content').classList.remove('hidden');
                document.getElementById('admin-logout-btn').classList.add('show');
                document.getElementById('user-display').textContent = 'Admin';
                showToast('Login admin berhasil!', 'success');
                
                // Show default admin section
                showSection('admin');
                showSubSection('input-kegagalan');
            } else {
                document.getElementById('login-error').style.display = 'block';
            }
        });

        function logoutAdmin() {
            isAdminLoggedIn = false;
            document.getElementById('admin-login').style.display = 'block';
            document.getElementById('admin-content').classList.add('hidden');
            document.getElementById('admin-logout-btn').classList.remove('show');
            document.getElementById('user-display').textContent = 'User';
            document.getElementById('admin-login-form').reset();
            document.getElementById('login-error').style.display = 'none';
            showToast('Logout berhasil!', 'info');
        }

        // =====================================================
        // ADMIN - INPUT KEGIATAN
        // =====================================================
        document.getElementById('kegagalan-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const kegiatan = {
                no: kegiatanData.length + 1,
                tema: document.getElementById('kegagalan-tema').value,
                tanggal: document.getElementById('kegagalan-tanggal').value,
                jam_mulai: document.getElementById('kegagalan-jam-mulai').value,
                jam_selesai: document.getElementById('kegagalan-jam-selesai').value,
                narasumber: document.getElementById('kegagalan-narasumber').value,
                jp: document.getElementById('kegagalan-jp').value,
                max_peserta: document.getElementById('kegagalan-max-peserta').value,
                tgl_mulai_daftar: document.getElementById('kegagalan-tgl-mulai-daftar').value,
                tgl_selesai_daftar: document.getElementById('kegagalan-tgl-selesai-daftar').value,
                is_active: document.getElementById('kegagalan-is-active').value,
                created_at: new Date().toISOString()
            };

            kegiatanData.push(kegiatan);
            localStorage.setItem('sipandai_kegagalan', JSON.stringify(kegiatanData));

            sendToGoogleSheets(kegagalan, 'kegagalan');

            showToast('Data kegiatan berhasil disimpan!', 'success');
            this.reset();
            updateDashboardStats();
        });

        // =====================================================
        // ADMIN - INPUT MATERI
        // =====================================================
        document.getElementById('materi-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const materi = {
                no: materiData.length + 1,
                tanggal_kegagalan: document.getElementById('materi-tanggal').value,
                tema: document.getElementById('materi-tema').value,
                narasumber: document.getElementById('materi-narasumber').value,
                link_download: document.getElementById('materi-link').value,
                created_at: new Date().toISOString()
            };

            materiData.push(materi);
            localStorage.setItem('sipandai_materi', JSON.stringify(materiData));

            sendToGoogleSheets(materi, 'materi');

            showToast('Data materi berhasil disimpan!', 'success');
            this.reset();
            updateMateriTable();
        });

        // =====================================================
        // ADMIN - INPUT SERTIFIKAT
        // =====================================================
        document.getElementById('sertifikat-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const sertifikat = {
                no: sertifikatData.length + 1,
                nama_peserta: document.getElementById('sertifikat-nama').value,
                unit_kerja: document.getElementById('sertifikat-unit-kerja').value,
                tanggal_kegagalan: document.getElementById('sertifikat-tanggal').value,
                tema: document.getElementById('sertifikat-tema').value,
                jp: document.getElementById('sertifikat-jp').value,
                link_download: document.getElementById('sertifikat-link').value,
                created_at: new Date().toISOString()
            };

            sertifikatData.push(sertifikat);
            localStorage.setItem('sipandai_sertifikat', JSON.stringify(sertifikatData));

            sendToGoogleSheets(sertifikat, 'sertifikat');

            showToast('Data sertifikat berhasil disimpan!', 'success');
            this.reset();
            updateSertifikatTable();
        });

        // =====================================================
        // DASHBOARD UPDATES
        // =====================================================
        function updateDashboardStats() {
            document.getElementById('stat-kegagalan').textContent = kegiatanData.length;
            document.getElementById('stat-peserta').textContent = registeredUsers.length;
            document.getElementById('stat-jp').textContent = attendanceData.length;
            document.getElementById('stat-webinar').textContent = kegiatanData.filter(k => k.is_active === '1').length;

            // Update recent activities
            const activitiesList = document.getElementById('recent-activities');
            if (kegagalanData.length > 0) {
                activitiesList.innerHTML = '';
                kegiatanData.slice(-5).reverse().forEach(k => {
                    const li = document.createElement('li');
                    li.className = 'activity-item';
                    li.innerHTML = `
                        <div class="activity-icon"><i class="fas fa-video"></i></div>
                        <div class="activity-info">
                            <h4>${k.tema}</h4>
                            <p>${k.tanggal} - Max ${k.max_peserta || '-'} Peserta</p>
                        </div>
                    `;
                    activitiesList.appendChild(li);
                });
            }
        }

        function updateMateriTable() {
            const tbody = document.getElementById('materi-table-body');
            document.getElementById('stat-materi').textContent = materiData.length;
            
            if (materiData.length > 0) {
                tbody.innerHTML = '';
                materiData.forEach((m, index) => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${m.tanggal_kegagalan || '-'}</td>
                        <td>${m.tema || '-'}</td>
                        <td>${m.narasumber || '-'}</td>
                        <td>${m.link_download ? '<a href="' + m.link_download + '" target="_blank" class="btn btn-primary btn-sm"><i class="fas fa-download"></i></a>' : '-'}</td>
                        <td class="action-btns">
                            <button class="btn btn-danger btn-sm" onclick="deleteMateri(${index})"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            }
        }

        function updateSertifikatTable() {
            const tbody = document.getElementById('sertifikat-table-body');
            document.getElementById('stat-sertifikat').textContent = sertifikatData.length;
            
            if (sertifikatData.length > 0) {
                tbody.innerHTML = '';
                sertifikatData.forEach((s, index) => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${s.nama_peserta || '-'}</td>
                        <td>${s.unit_kerja || '-'}</td>
                        <td>${s.tanggal_kegagalan || '-'}</td>
                        <td>${s.tema || '-'}</td>
                        <td>${s.jp || '-'}</td>
                        <td>${s.link_download ? '<a href="' + s.link_download + '" target="_blank" class="btn btn-primary btn-sm"><i class="fas fa-download"></i></a>' : '-'}</td>
                    `;
                    tbody.appendChild(tr);
                });
            }
        }

        // Delete functions
        function deleteMateri(index) {
            if (confirm('Yakin ingin menghapus data ini?')) {
                materiData.splice(index, 1);
                localStorage.setItem('sipandai_materi', JSON.stringify(materiData));
                updateMateriTable();
                showToast('Data materi dihapus!', 'info');
            }
        }

        // =====================================================
        // INITIALIZATION
        // =====================================================
        window.onload = function() {
            showSection('dashboard');
            showSubSection('dashboard-kegagalan');
            updateDashboardStats();
        };
    </script>
</body>
</html>
