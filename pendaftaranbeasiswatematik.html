<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulir Beasiswa Tematik SDM Kesehatan</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Arial, sans-serif;
      background: #f3f4f6;
      color: #1f2937;
    }
    .spacer { height: 80px; }
    .container-form {
      max-width: 900px;
      margin: 0 auto 40px;
      padding: 32px;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    }
    h2 {
      text-align: center;
      margin-bottom: 36px;
      font-size: 24px;
      font-weight: 600;
      color: #111827;
    }
    form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 22px 26px;
    }
    .form-group {
      display: flex;
      flex-direction: column;
    }
    .form-group.full-width { grid-column: span 2; }
    label {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 6px;
      color: #374151;
    }
    input, textarea, select {
      padding: 11px 12px;
      font-size: 14px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
      outline: none;
      transition: 0.2s ease;
      background: #fff;
    }
    textarea { min-height: 80px; resize: vertical; }
    input:focus, textarea:focus, select:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }
    button {
      margin-top: 10px;
      padding: 13px;
      font-size: 15px;
      font-weight: 600;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #2563eb, #1e40af);
      color: #fff;
      transition: 0.2s ease;
    }
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(37,99,235,0.35);
    }
    @media (max-width: 768px) {
      form { grid-template-columns: 1fr; }
      .form-group.full-width { grid-column: span 1; }
    }
  </style>
</head>
<body>

<div class="spacer"></div>

<div class="container-form">
  <h2>Formulir Beasiswa Tematik SDM Kesehatan Kabupaten Kutai Kartanegara</h2>

  <form id="izinForm">

    <div class="form-group">
      <label>Nama Lengkap</label>
      <input type="text" name="namaPemohon" required>
    </div>

    <div class="form-group">
      <label>Tempat & Tanggal Lahir</label>
      <input type="text" name="tempatTanggalLahir" placeholder="Contoh: Tenggarong, 12  Agustus 1998" required>
    </div>

    <div class="form-group full-width">
      <label>Alamat Sesuai KTP</label>
      <textarea name="alamatKTP" required></textarea>
    </div>

    <div class="form-group full-width">
      <label>Alamat Domisili</label>
      <textarea name="alamatDomisili" required></textarea>
    </div>

    <div class="form-group">
      <label>Status</label>
      <select name="status" required>
        <option value="">-- Pilih Status --</option>
        <option value="ASN">ASN</option>
        <option value="Non ASN">Non ASN</option>
      </select>
    </div>

    <div class="form-group">
      <label>Keterangan</label>
      <select name="keterangan" required>
        <option value="">-- Pilih Keterangan --</option>
        <option value="Proses Seleksi">Proses Seleksi</option>
        <option value="On Going">On Going</option>
        <option value="Sedang Pemberkasan Administratif">Sedang Pemberkasan Administratif</option>
        <option value="Lain-lain">Lain-lain</option>
      </select>
    </div>

    <div class="form-group">
      <label>Unit Kerja Saat Ini</label>
      <input type="text" name="unitKerja" required>
    </div>

    <div class="form-group">
      <label>Jurusan, Jenis Pendidikan dan Unit Pendayaguna Setelah Pendidikan (cont: Spesialis Radiologi, Sp1, RSUD Aji Muhammad Idris</label>
      <input type="text" name="unitKerjaPenempatan" required>
    </div>

    <div class="form-group">
      <label>Rencana Tahun Studi</label>
      <input type="number" name="tahunStudi" placeholder="Contoh: 2026" required>
    </div>

    <div class="form-group">
      <label>Nomor Telpon/ Whatsapp</label>
      <input type="number" name="nomorTelpon" required>
    </div>

    <div class="form-group full-width">
      <label>File Dokumen Persyaratan (Maks 1 MB, Jadikan 1 File terdiri dari KTP, Ijazah, Transkrip Nilai, Surat Permohonan ke Bupati, Surat Rekomendasi melepas dan menerima dari Pimpinan Unit asal/ menerima dari pimpinan unit tujuan jika pindah, *STR Aktif khusus bagi NamedNakes Klinisi)</label>
      <input type="file" name="fileDokumenPersyaratan">
    </div>

    <div class="form-group full-width">
      <label>Email</label>
      <input type="email" name="email" required>
    </div>

    <div class="form-group full-width">
      <button type="submit">Kirim Data</button>
    </div>

  </form>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzlps1-YboNWZDdlVYrp5WiwuppVtOabqRLBm8JYG21f84yUBLtTwV6jSQFaIpM3lbOkw/exec";

const form = document.getElementById('izinForm');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = new FormData(form);
  const file = data.get('fileDokumenPersyaratan');

  let fileData = null;
  let fileUrl = "";
  if(file && file.size > 0){
    if(file.size > 1*1024*1024){
      alert("File terlalu besar! Maksimal 1 MB");
      return;
    }
    const arrayBuffer = await file.arrayBuffer();
    fileData = {
      name: file.name,
      mimeType: file.type,
      bytes: Array.from(new Uint8Array(arrayBuffer))
    };
  }

  const obj = {
    namaPemohon: data.get('namaPemohon'),
    tempatTanggalLahir: data.get('tempatTanggalLahir'),
    alamatKTP: data.get('alamatKTP'),
    alamatDomisili: data.get('alamatDomisili'),
    status: data.get('status'),
    keterangan: data.get('keterangan'),
    unitKerja: data.get('unitKerja'),
    unitKerjaPenempatan: data.get('unitKerjaPenempatan'),
    tahunStudi: data.get('tahunStudi'),
    nomorTelpon: data.get('nomorTelpon'),
    fileDokumenPersyaratan: fileData,
    email: data.get('email')
  };

  try {
    const res = await fetch(WEB_APP_URL, {
      method: "POST",
      body: JSON.stringify(obj)
    });
    const result = await res.json();
    if(result.status === "success") {
      alert("Data berhasil dikirim!");
      form.reset();
    } else {
      alert("Terjadi error: " + result.message);
    }
  } catch(err) {
    alert("Gagal mengirim data: " + err.message);
  }
});
</script>

</body>
</html>
