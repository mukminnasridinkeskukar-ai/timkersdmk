<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard UKOM JFK</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{background:#f4f6f9}
.avatar{
  width:48px;
  height:48px;
  border-radius:50%;
  object-fit:cover;
}
</style>
</head>

<body>
<div class="container py-4">
  <h4 class="mb-3">Dashboard UKOM JFK</h4>

  <table class="table table-bordered bg-white">
    <thead>
      <tr>
        <th>Foto</th>
        <th>Nama</th>
        <th>Unit</th>
        <th>Jenis</th>
        <th>Jenjang</th>
      </tr>
    </thead>
    <tbody id="tbl"></tbody>
  </table>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbw_7lHkWsLet6CkTMETro8KK5T6AujziNzzo2HlMBpDjGmaKWsgFNdlBpG3aQGsTSQF/exec";

fetch(API_URL + "?action=dashboard")
  .then(r => r.json())
  .then(data => {
    console.log("DATA:", data);
    const tbl = document.getElementById("tbl");
    tbl.innerHTML = "";

    data.forEach(r => {
      const foto = r.foto
        ? r.foto
        : "https://ui-avatars.com/api/?name="+encodeURIComponent(r.nama);

      tbl.innerHTML += `
        <tr>
          <td><img src="${foto}" class="avatar"></td>
          <td>${r.nama}</td>
          <td>${r.unit}</td>
          <td>${r.jenis}</td>
          <td>${r.jenjang}</td>
        </tr>
      `;
    });
  })
  .catch(err => {
    console.error(err);
    alert("Gagal load data");
  });
</script>
</body>
</html>
