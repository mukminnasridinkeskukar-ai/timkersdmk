<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard UKOM JFK</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
body{background:#f4f6f9;font-family:"Segoe UI",Arial}
.header{
  background:linear-gradient(135deg,#0d6efd,#084298);
  color:#fff;padding:20px 24px;border-radius:16px;margin-bottom:20px
}
.avatar{width:40px;height:40px;border-radius:50%;object-fit:cover}
.avatar-lg{width:140px;height:140px;border-radius:50%;object-fit:cover;border:4px solid #e9ecef}
.badge-kategori{background:#0d6efd}
tr{cursor:pointer}

/* Skeleton */
.skeleton{
  background:linear-gradient(90deg,#eee,#f5f5f5,#eee);
  background-size:200% 100%;
  animation:skeleton 1.2s infinite
}
@keyframes skeleton{0%{background-position:200%}100%{background-position:-200%}}

.lightbox{
  position:fixed;inset:0;background:rgba(0,0,0,.85);
  display:none;align-items:center;justify-content:center;z-index:2000
}
.lightbox img{max-width:90%;max-height:90%;border-radius:12px}
</style>
</head>

<body>

<div class="container py-4">

<div class="header d-flex justify-content-between align-items-center">
  <div>
    <h4 class="mb-1">Dashboard UKOM JFK</h4>
    <small>Monitoring Peserta Uji Kompetensi Jabatan Fungsional</small>
  </div>
  <i class="bi bi-bar-chart fs-1 opacity-50"></i>
</div>

<div class="card border-0 shadow-sm rounded-4">
<div class="table-responsive">
<table class="table table-hover align-middle mb-0">
<thead class="table-light">
<tr>
<th>Foto</th><th>Nama</th><th>Unit</th><th>Jenis</th><th>Jenjang</th>
<th>Kategori</th><th>JF</th><th>Jenjang Tujuan</th>
</tr>
</thead>
<tbody id="tbl">
<tr><td colspan="8" class="p-4 skeleton">&nbsp;</td></tr>
</tbody>
</table>
</div>
</div>

</div>

<!-- MODAL PROFIL -->
<div class="modal fade" id="profilModal">
<div class="modal-dialog modal-lg modal-dialog-centered">
<div class="modal-content rounded-4">
<div class="modal-header bg-primary text-white">
<h5 class="modal-title">Profil Peserta</h5>
<button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<div class="row g-4">
<div class="col-md-4 text-center">
<img id="p_foto" class="avatar-lg mb-2">
<div class="small text-muted">Klik foto untuk fullscreen</div>
</div>
<div class="col-md-8">
<h5 id="p_nama"></h5>
<div><b>NIP:</b> <span id="p_nip"></span></div>
<div><b>NIK:</b> <span id="p_nik"></span></div>
<div><b>Unit:</b> <span id="p_unit"></span></div>
<div><b>Jenis:</b> <span id="p_jenis"></span></div>
<div><b>Jenjang:</b> <span id="p_jenjang"></span></div>
<div><b>Pangkat:</b> <span id="p_pangkat"></span></div>
<div><b>PAK:</b> <span id="p_pak"></span></div>
<div><b>STR:</b> <span id="p_str"></span></div>
<div class="mt-2"><b>Keputusan:</b><br><span id="p_keputusan"></span></div>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" onclick="this.style.display='none'">
<img id="lightboxImg">
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbztuZ1zQmgy1-5SXThYRblNxITDKabSo3tMAN5eVIwPwWhgfZBptum3dQ224DjXaFnhDQ/exec";

const avatar = n =>
`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=0D6EFD&color=fff`;

fetch(API_URL+"?action=dashboard")
.then(r=>r.json())
.the
