<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Galeri Kegiatan Tim Kerja SDM Kesehatan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Poppins',sans-serif;
  margin:0;
  background:#f8fafc;
  color:#334155;
}

.container{
  max-width:1300px;
  margin:auto;
  padding:40px 20px;
}

h2{margin-bottom:4px}
.meta{
  font-size:14px;
  color:#64748b;
  margin-bottom:20px;
}

/* GRID */
.gallery{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:14px;
}

.gallery img{
  width:100%;
  height:180px;
  object-fit:cover;
  border-radius:12px;
  cursor:pointer;
  transition:.3s;
}

.gallery img:hover{
  transform:scale(1.05);
}

/* RESPONSIVE */
@media(max-width:1200px){.gallery{grid-template-columns:repeat(4,1fr)}}
@media(max-width:900px){.gallery{grid-template-columns:repeat(3,1fr)}}
@media(max-width:600px){.gallery{grid-template-columns:repeat(2,1fr)}}

/* LIGHTBOX */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.lightbox.active{display:flex}
.lightbox-content{text-align:center;max-width:90%}
.lightbox img{max-width:100%;max-height:75vh;border-radius:14px}
.caption{color:#e5e7eb;margin-top:12px}
</style>
</head>

<body>

<div class="container" id="app">
  <h1>GALERI FOTO KEGIATAN TIM KERJA SUMBER DAYA MANUSIA KESEHATAN</h1>
  <p>Dokumentasi kegiatan Timker SDMK Dinas Kesehatan.</p>
</div>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox">
  <div class="lightbox-content">
    <img id="lbImg">
    <div class="caption" id="lbCap"></div>
  </div>
</div>

<script>
const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzWu9fk2E0K7uAnjEGIOxfpXe_w54SMq-zBdfwOV5Bv5b4a8vFTevOYc08hH6e6iAlNrQ/exec';

fetch(WEB_APP_URL)
  .then(r=>r.json())
  .then(data=>{
    const app = document.getElementById('app');

    data.forEach(kegiatan=>{
      const section = document.createElement('section');
      section.innerHTML = `
        <h2>${kegiatan.title}</h2>
        <div class="meta">üìÖ ${kegiatan.date} ¬∑ üìç ${kegiatan.place}</div>
        <div class="gallery">
          ${kegiatan.photos.map(p=>`
            <img src="${p.url}"
                 data-title="${kegiatan.title}"
                 data-date="${kegiatan.date}"
                 data-place="${kegiatan.place}">
          `).join('')}
        </div>
        <br><br>
      `;
      app.appendChild(section);
    });

    initLightbox();
  });

function initLightbox(){
  const lb = document.getElementById('lightbox');
  const img = document.getElementById('lbImg');
  const cap = document.getElementById('lbCap');

  document.querySelectorAll('.gallery img').forEach(el=>{
    el.onclick = ()=>{
      img.src = el.src;
      cap.innerHTML = `<strong>${el.dataset.title}</strong><br>üìÖ ${el.dataset.date} ¬∑ üìç ${el.dataset.place}`;
      lb.classList.add('active');
    };
  });

  lb.onclick = ()=> lb.classList.remove('active');
}
</script>

</body>
</html>
