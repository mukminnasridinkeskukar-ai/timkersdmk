<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Profil Tim Kerja SDM Kesehatan</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background:#f4f6f9;
  font-family:Segoe UI, Arial, sans-serif;
}

/* ===== GALERI ===== */
.team-card{
  border:none;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
  cursor:pointer;
  transition:.3s;
  height:100%;
}
.team-card:hover{
  transform:translateY(-6px);
  box-shadow:0 18px 40px rgba(0,0,0,.15);
}

/* FOTO GALERI 4x6 */
.team-photo{
  width:120px;
  height:180px;
  object-fit:cover;
  border-radius:10px;
  border:3px solid #e9ecef;
  background:#f0f0f0;
}

/* ===== MODAL ===== */
.modal-photo{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:14px;
  background:#f0f0f0;
}

.modal-body table th{
  font-weight:600;
  white-space:nowrap;
}
</style>
</head>

<body>

<div class="container py-5">
  <div class="text-center mb-4">
    <h2 class="fw-bold">Profil Tim Kerja SDM Kesehatan</h2>
    <p class="text-muted">Bidang Sumber Daya Kesehatan</p>
  </div>

  <div class="row g-4" id="gallery"></div>
</div>

<!-- MODAL -->
<div class="modal fade" id="profileModal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content rounded-4">

      <div class="modal-header">
        <h5 class="modal-title fw-bold" id="mName"></h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div class="row g-4 align-items-stretch">

          <!-- FOTO -->
          <div class="col-md-4 d-flex">
            <img id="mPhoto" class="modal-photo">
          </div>

          <!-- DATA -->
          <div class="col-md-8">
            <table class="table table-sm mb-0">
              <tbody id="mData"></tbody>
            </table>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxFQkgiU3XQ0wD4sbFwfwu5BdfBJnFGm9WC8zPoSHvEopfCODP8fqrS61F6An7TehY3/exec";
const DEFAULT_PHOTO = "https://via.placeholder.com/300x450?text=No+Photo";

fetch(API_URL)
.then(r=>r.json())
.then(data=>{
  const g=document.getElementById("gallery");

  data.forEach(p=>{
    const photo = p["Foto"] || DEFAULT_PHOTO;

    const c=document.createElement("div");
    c.className="col-md-6 col-lg-3";

    c.innerHTML=`
      <div class="card team-card p-3 text-center h-100"
        onclick='openProfile(${JSON.stringify(p)})'>
        <img src="${photo}" class="team-photo mx-auto mb-3"
             onerror="this.src='${DEFAULT_PHOTO}'">
        <strong>${p["Nama Lengkap dan Gelar"]}</strong>
        <div class="text-muted small">${p["Jenis Jabatan"]}</div>
      </div>
    `;
    g.appendChild(c);
  });
});

function openProfile(p){
  document.getElementById("mName").innerText = p["Nama Lengkap dan Gelar"];

  const img = document.getElementById("mPhoto");
  img.src = p["Foto"] || DEFAULT_PHOTO;
  img.onerror = () => img.src = DEFAULT_PHOTO;

  const rows = [
    ["NIP", p["NIP"]],
    ["Tempat / Tgl Lahir", p["Tempat Tanggal Lahir"]],
    ["Status Kepegawaian", p["Status Kepegawaian"]],
    ["Pangkat / Golongan", p["Pangkat/Golongan"]],
    ["Jenis Jabatan", p["Jenis Jabatan"]],
    ["Jenjang Jabatan", p["Jenjang Jabatan"]],
    ["Alamat KTP", p["Alamat KTP"]],
    ["Telp / WhatsApp", p["Telpon/Whatsapp"]]
  ];

  document.getElementById("mData").innerHTML =
    rows.map(r=>`
      <tr>
        <th width="35%">${r[0]}</th>
        <td>${r[1] || "-"}</td>
      </tr>
    `).join("");

  new bootstrap.Modal(document.getElementById("profileModal")).show();
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
