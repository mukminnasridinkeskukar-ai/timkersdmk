<div class="wrap">

  <!-- HEADER JADWAL + TOMBOL DAFTAR -->
  <div class="jadwal-header">
    <h2>üìÖ Jadwal Kegiatan Terintegrasi</h2>

    <a href="#formdaftarsipandaiasn.html" class="btn-daftar">
      <span class="btn-icon">üìù</span>
      <span class="btn-text">Daftar Sekarang</span>
      <span class="btn-glow"></span>
    </a>
  </div>

  <!-- FILTER -->
  <div class="filter">
    <input type="date" id="searchTanggal">
    <select id="filterBulan">
      <option value="">Semua Bulan</option>
    </select>
    <input id="filterTema" placeholder="Filter Tema">
    <select id="filterJP">
      <option value="">Semua JP</option>
      <option value="<=2">‚â§ 2 JP</option>
      <option value="3-6">3 - 6 JP</option>
      <option value=">6">> 6 JP</option>
    </select>
  </div>

  <!-- LIST -->
  <div id="list"></div>
</div>

<style>
/* ================= WRAPPER ================= */
.wrap{
  max-width:1200px;
  margin:auto;
  font-family:Segoe UI,Arial;
  padding:10px;
}

/* ================= HEADER ================= */
.jadwal-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
  margin-bottom:10px;
}
.jadwal-header h2{
  margin:0;
}

/* ================= TOMBOL DAFTAR ================= */
.btn-daftar{
  position:relative;
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:12px 20px;
  border-radius:999px;
  background:linear-gradient(135deg,#2563eb,#1e40af);
  color:#fff;
  text-decoration:none;
  font-weight:700;
  overflow:hidden;
  box-shadow:0 10px 30px rgba(37,99,235,.35);
  transition:transform .25s ease, box-shadow .25s ease;
}

/* glow animasi */
.btn-daftar::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:inherit;
  background:linear-gradient(120deg,#60a5fa,#2563eb,#22c55e);
  filter:blur(10px);
  opacity:.6;
  z-index:-1;
  animation:glow 3s linear infinite;
}

@keyframes glow{
  0%{filter:blur(10px) hue-rotate(0deg)}
  100%{filter:blur(10px) hue-rotate(360deg)}
}

.btn-daftar:hover{
  transform:translateY(-3px) scale(1.03);
  box-shadow:0 18px 45px rgba(37,99,235,.5);
}

.btn-daftar:active{
  transform:scale(.96);
}

.btn-icon{
  font-size:18px;
  animation:pulse 2s infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.15)}
}

/* ================= FILTER ================= */
.filter{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:8px;
  margin-bottom:15px;
}
.filter input,.filter select{
  padding:8px;
  border-radius:8px;
  border:1px solid #ddd;
}

/* ================= CARD ================= */
.card{
  background:#fff;
  border-radius:16px;
  padding:14px;
  margin-bottom:12px;
  box-shadow:0 8px 18px rgba(0,0,0,.08);
  animation:fade .4s ease;
}
@keyframes fade{
  from{opacity:0;transform:translateY(12px)}
}

/* ================= BADGE ================= */
.badge{
  display:inline-block;
  padding:4px 12px;
  border-radius:20px;
  background:#3b82f6;
  color:#fff;
  font-size:12px;
  margin-right:6px;
}
.jp{
  background:#22c55e;
}
small{color:#555}

/* ================= RESPONSIF ================= */
@media(max-width:600px){
  .jadwal-header{
    flex-direction:column;
    align-items:flex-start;
  }
  .btn-daftar{
    width:100%;
    justify-content:center;
  }
}
</style>

<script>
const API = "https://script.google.com/macros/s/AKfycbyQ23bjDKCCPFZMZ45_S7SjtjOvSUU0djKl1R_-YWiS5XEh5FJcLkjOSrtTH1tQBF8/exec";
let DATA = [];

fetch(API).then(r=>r.json()).then(res=>{
  DATA = res;
  isiBulan();
  render(DATA);
});

function isiBulan(){
  const bulan = [...new Set(DATA.map(d=>d.bulan))];
  const sel = document.getElementById("filterBulan");
  bulan.forEach(b=>{
    sel.innerHTML += `<option value="${b}">${b}</option>`;
  });
}

document.querySelectorAll("input,select")
.forEach(el=>el.oninput=filter);

function filter(){
  const tgl = searchTanggal.value;
  const bln = filterBulan.value.toLowerCase();
  const tema = filterTema.value.toLowerCase();
  const jp = filterJP.value;

  const f = DATA.filter(d=>{
    return (!tgl || d.tanggal==tgl) &&
           (!bln || d.bulan.toLowerCase()==bln) &&
           (!tema || d.tema.toLowerCase().includes(tema)) &&
           cekJP(d.total,jp);
  });
  render(f);
}

function cekJP(val,rule){
  if(!rule) return true;
  if(rule=="<=2") return val<=2;
  if(rule=="3-6") return val>=3 && val<=6;
  if(rule==">6") return val>6;
}

function render(arr){
  list.innerHTML = arr.map(d=>`
    <div class="card">
      <span class="badge">${d.bulan}</span>
      <span class="badge jp">${d.total} JP</span>
      <h3>${d.tema}</h3>
      <small>üìÖ ${d.tanggal} | üíª ${d.platform}</small>
      <ul>
        ${d.n1?`<li><b>${d.n1}</b> ‚Äì ${d.j1} (${d.jp1} JP)</li>`:''}
        ${d.n2?`<li><b>${d.n2}</b> ‚Äì ${d.j2} (${d.jp2} JP)</li>`:''}
        ${d.n3?`<li><b>${d.n3}</b> ‚Äì ${d.j3} (${d.jp3} JP)</li>`:''}
      </ul>
    </div>
  `).join('');
}
</script>
