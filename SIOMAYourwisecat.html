<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Kucing - Virtual Pet Pro</title>
  <style>
    /* =====================================================
       CSS VARIABLES & RESET
    ===================================================== */
    :root {
      --primary: #6C5CE7;
      --primary-light: #A29BFE;
      --secondary: #00CEC9;
      --accent: #FD79A8;
      --warning: #FDCB6E;
      --danger: #E17055;
      --success: #00B894;
      --dark: #2D3436;
      --light: #DFE6E9;
      --white: #FFFFFF;
      --glass-bg: rgba(255, 255, 255, 0.15);
      --glass-border: rgba(255, 255, 255, 0.2);
      --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      --shadow-light: 0 4px 16px 0 rgba(31, 38, 135, 0.2);
      --radius: 20px;
      --radius-sm: 12px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      min-height: 100vh;
      background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      overflow-x: hidden;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* =====================================================
       MAIN LAYOUT
    ===================================================== */
    .app-container {
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      width: 260px;
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-right: 1px solid var(--glass-border);
      padding: 20px;
      display: flex;
      flex-direction: column;
      position: fixed;
      height: 100vh;
      z-index: 100;
      transition: transform 0.3s ease;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--white);
      text-align: center;
      padding: 20px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .logo span {
      color: var(--accent);
    }

    .nav-menu {
      list-style: none;
      margin-top: 20px;
    }

    .nav-item {
      margin: 8px 0;
    }

    .nav-link {
      display: flex;
      align-items: center;
      padding: 14px 18px;
      color: var(--white);
      text-decoration: none;
      border-radius: var(--radius-sm);
      transition: all 0.3s ease;
      font-weight: 500;
      cursor: pointer;
    }

    .nav-link:hover, .nav-link.active {
      background: rgba(255,255,255,0.2);
      transform: translateX(5px);
    }

    .nav-link i {
      margin-right: 12px;
      font-size: 1.2rem;
    }

    .main-content {
      flex: 1;
      margin-left: 260px;
      padding: 20px;
      min-height: 100vh;
    }

    .page {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .page.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* =====================================================
       DASHBOARD
    ===================================================== */
    .dashboard-header {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 25px;
      margin-bottom: 25px;
      border: 1px solid var(--glass-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .user-info h2 {
      color: var(--white);
      font-size: 1.5rem;
    }

    .user-info .level-badge {
      display: inline-block;
      background: var(--accent);
      color: var(--white);
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      margin-top: 5px;
    }

    .stats-bar {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .stat-item {
      background: rgba(255,255,255,0.2);
      padding: 10px 20px;
      border-radius: var(--radius-sm);
      color: var(--white);
      text-align: center;
    }

    .stat-item .stat-label {
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .stat-item .stat-value {
      font-size: 1.3rem;
      font-weight: 700;
    }

    /* =====================================================
       YARD & CAT HOUSE
    ===================================================== */
    .yard-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 25px;
    }

    @media (max-width: 1000px) {
      .yard-container {
        grid-template-columns: 1fr;
      }
    }

    .cat-house {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 30px;
      border: 1px solid var(--glass-border);
      position: relative;
      min-height: 450px;
    }

    .cat-house h3 {
      color: var(--white);
      margin-bottom: 20px;
      font-size: 1.3rem;
    }

    .house-structure {
      position: relative;
      width: 280px;
      height: 220px;
      margin: 0 auto 20px;
    }

    .house-roof {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 110px solid transparent;
      border-right: 110px solid transparent;
      border-bottom: 70px solid #8B4513;
    }

    .house-roof::after {
      content: '';
      position: absolute;
      top: 25px;
      left: -70px;
      width: 140px;
      height: 15px;
      background: #A0522D;
      border-radius: 5px;
    }

    .house-body {
      position: absolute;
      top: 70px;
      left: 50%;
      transform: translateX(-50%);
      width: 180px;
      height: 150px;
      background: linear-gradient(180deg, #DEB887 0%, #D2691E 100%);
      border-radius: 10px 10px 0 0;
      border: 3px solid #8B4513;
    }

    .house-window {
      position: absolute;
      width: 40px;
      height: 40px;
      background: #87CEEB;
      border: 3px solid #8B4513;
      border-radius: 5px;
      top: 25px;
    }

    .house-window.left { left: 20px; }
    .house-window.right { right: 20px; }

    .house-door {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 65px;
      background: #654321;
      border-radius: 25px 25px 0 0;
      border: 3px solid #8B4513;
    }

    .house-door::after {
      content: '';
      position: absolute;
      top: 30px;
      right: 8px;
      width: 6px;
      height: 6px;
      background: #FFD700;
      border-radius: 50%;
    }

    /* Cats Area */
    .cats-area {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      padding: 10px;
    }

    /* ========== CAT STYLES ========== */
    .cat {
      position: relative;
      width: 70px;
      height: 70px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .cat:hover {
      transform: scale(1.1);
    }

    .cat.selected {
      transform: scale(1.15);
    }

    .cat-body {
      position: absolute;
      width: 55px;
      height: 42px;
      border-radius: 30px 30px 22px 22px;
      top: 20px;
      left: 8px;
      animation: breathe 3s ease-in-out infinite;
    }

    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    .cat-head {
      position: absolute;
      width: 45px;
      height: 38px;
      border-radius: 50%;
      top: 0;
      left: 13px;
      z-index: 2;
    }

    .cat-ear {
      position: absolute;
      width: 18px;
      height: 22px;
      top: -8px;
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    }

    .cat-ear.left { left: 3px; transform: rotate(-15deg); }
    .cat-ear.right { right: 3px; transform: rotate(15deg); }

    .cat-face {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 10px;
    }

    .cat-eye {
      position: absolute;
      width: 8px;
      height: 10px;
      background: #2D3436;
      border-radius: 50%;
      top: 6px;
      animation: blink 4s infinite;
    }

    .cat-eye::after {
      content: '';
      position: absolute;
      width: 3px;
      height: 3px;
      background: white;
      border-radius: 50%;
      top: 1px;
      left: 1px;
    }

    .cat-eye.left { left: 8px; }
    .cat-eye.right { right: 8px; }

    @keyframes blink {
      0%, 90%, 100% { transform: scaleY(1); }
      95% { transform: scaleY(0.1); }
    }

    .cat-nose {
      position: absolute;
      width: 7px;
      height: 6px;
      background: #E17055;
      border-radius: 50%;
      top: 18px;
      left: 19px;
    }

    .cat-mouth {
      position: absolute;
      top: 23px;
      left: 17px;
      width: 10px;
      height: 5px;
      border: 1.5px solid #2D3436;
      border-top: none;
      border-radius: 0 0 8px 8px;
    }

    .cat-whiskers {
      position: absolute;
      top: 18px;
      width: 100%;
    }

    .whisker {
      position: absolute;
      width: 14px;
      height: 1.5px;
      background: #2D3436;
    }

    .whisker.left-1 { left: -2px; top: 3px; transform: rotate(-10deg); }
    .whisker.left-2 { left: -4px; top: 8px; transform: rotate(5deg); }
    .whisker.right-1 { right: -2px; top: 3px; transform: rotate(10deg); }
    .whisker.right-2 { right: -4px; top: 8px; transform: rotate(-5deg); }

    .cat-tail {
      position: absolute;
      width: 10px;
      height: 35px;
      bottom: 8px;
      right: 0;
      border-radius: 8px;
      transform-origin: bottom center;
      animation: tailWag 2s ease-in-out infinite;
    }

    @keyframes tailWag {
      0%, 100% { transform: rotate(-15deg); }
      50% { transform: rotate(15deg); }
    }

    .cat-paw {
      position: absolute;
      width: 18px;
      height: 14px;
      border-radius: 50%;
      bottom: 0;
    }

    .cat-paw.left { left: 12px; }
    .cat-paw.right { right: 12px; }

    .cat.bounce .cat-body {
      animation: bounce 0.5s ease;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    .cat.sleep .cat-eye {
      height: 2px;
      border-radius: 0;
      top: 10px;
    }

    .cat.sleep .zzz {
      display: block;
    }

    .cat.sick .cat-body {
      animation: shake 0.5s infinite;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-2px); }
      75% { transform: translateX(2px); }
    }

    .zzz {
      display: none;
      position: absolute;
      top: -15px;
      right: -20px;
      font-size: 1rem;
      color: var(--white);
      font-weight: bold;
      animation: zzz 2s infinite;
    }

    @keyframes zzz {
      0% { opacity: 0; transform: translateY(0); }
      50% { opacity: 1; }
      100% { opacity: 0; transform: translateY(-15px); }
    }

    /* Cat Colors */
    .cat.pink .cat-body, .cat.pink .cat-head, .cat.pink .cat-ear, .cat.pink .cat-tail, .cat.pink .cat-paw {
      background: linear-gradient(180deg, #FFB6C1 0%, #FF69B4 100%);
    }
    .cat.orange .cat-body, .cat.orange .cat-head, .cat.orange .cat-ear, .cat.orange .cat-tail, .cat.orange .cat-paw {
      background: linear-gradient(180deg, #FFA500 0%, #FF8C00 100%);
    }
    .cat.grey .cat-body, .cat.grey .cat-head, .cat.grey .cat-ear, .cat.grey .cat-tail, .cat.grey .cat-paw {
      background: linear-gradient(180deg, #C0C0C0 0%, #808080 100%);
    }
    .cat.black .cat-body, .cat.black .cat-head, .cat.black .cat-ear, .cat.black .cat-tail, .cat.black .cat-paw {
      background: linear-gradient(180deg, #4a4a4a 0%, #2d2d2d 100%);
    }
    .cat.white .cat-body, .cat.white .cat-head, .cat.white .cat-ear, .cat.white .cat-tail, .cat.white .cat-paw {
      background: linear-gradient(180deg, #FFFFFF 0%, #E0E0E0 100%);
    }
    .cat.calico .cat-body, .cat.calico .cat-head {
      background: linear-gradient(180deg, #FFB6C1 0%, #FF8C00 50%, #FFFFFF 100%);
    }

    /* ========== CONTROLS PANEL ========== */
    .controls-panel {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 25px;
      border: 1px solid var(--glass-border);
    }

    .controls-panel h3 {
      color: var(--white);
      margin-bottom: 20px;
      font-size: 1.2rem;
    }

    .selected-cat-info {
      background: rgba(255,255,255,0.1);
      border-radius: var(--radius-sm);
      padding: 15px;
      margin-bottom: 20px;
      color: var(--white);
    }

    .selected-cat-info h4 {
      margin-bottom: 10px;
      color: var(--accent);
    }

    .status-item {
      margin-bottom: 15px;
    }

    .status-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
      color: var(--white);
      font-size: 0.85rem;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      background: rgba(255,255,255,0.2);
      border-radius: 8px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 8px;
      transition: width 0.5s ease;
    }

    .progress-fill.high { background: linear-gradient(90deg, var(--success), #55EFC4); }
    .progress-fill.medium { background: linear-gradient(90deg, var(--warning), #FFEAA7); }
    .progress-fill.low { background: linear-gradient(90deg, var(--danger), #FAB1A0); }

    .action-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .action-btn {
      padding: 12px;
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-family: inherit;
      font-weight: 600;
      font-size: 0.85rem;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    .action-btn:hover {
      transform: translateY(-2px);
    }

    .action-btn.feed { background: linear-gradient(135deg, #FF6B6B, #EE5A5A); color: white; }
    .action-btn.clean { background: linear-gradient(135deg, #74B9FF, #0984E3); color: white; }
    .action-btn.play { background: linear-gradient(135deg, #FDCB6E, #F39C12); color: white; }
    .action-btn.sleep { background: linear-gradient(135deg, #A29BFE, #6C5CE7); color: white; }

    .add-cat-btn {
      width: 100%;
      padding: 12px;
      margin-top: 15px;
      background: linear-gradient(135deg, var(--success), #55EFC4);
      color: white;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .add-cat-btn:hover {
      transform: translateY(-2px);
    }

    .color-selector {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 15px;
    }

    .color-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: 2px solid white;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .color-btn:hover {
      transform: scale(1.2);
    }

    .color-btn.pink { background: linear-gradient(180deg, #FFB6C1, #FF69B4); }
    .color-btn.orange { background: linear-gradient(180deg, #FFA500, #FF8C00); }
    .color-btn.grey { background: linear-gradient(180deg, #C0C0C0, #808080); }
    .color-btn.black { background: linear-gradient(180deg, #4a4a4a, #2d2d2d); }
    .color-btn.white { background: linear-gradient(180deg, #FFFFFF, #E0E0E0); }
    .color-btn.calico { background: linear-gradient(180deg, #FFB6C1, #FF8C00); }

    /* =====================================================
       PARTICLE EFFECTS
    ===================================================== */
    .particle-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      animation: particleFall 3s ease-out forwards;
    }

    @keyframes particleFall {
      0% { opacity: 1; transform: translateY(0) rotate(0deg); }
      100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
    }

    /* =====================================================
       SHOP
    ===================================================== */
    .shop-header {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 25px;
      border: 1px solid var(--glass-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .shop-header h2 { color: var(--white); }

    .coin-display {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,0.2);
      padding: 10px 20px;
      border-radius: var(--radius-sm);
      color: var(--white);
    }

    .coin-icon {
      width: 30px;
      height: 30px;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .shop-categories {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .category-btn {
      padding: 10px 20px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      color: var(--white);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .category-btn:hover, .category-btn.active {
      background: var(--primary);
      border-color: var(--primary);
    }

    .shop-items {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
    }

    .shop-item {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 20px;
      border: 1px solid var(--glass-border);
      text-align: center;
      transition: all 0.3s ease;
    }

    .shop-item:hover { transform: translateY(-5px); }

    .shop-item-icon { font-size: 2.5rem; margin-bottom: 10px; }
    .shop-item-name { color: var(--white); font-weight: 600; margin-bottom: 5px; }
    .shop-item-price { color: var(--warning); font-weight: bold; margin-bottom: 15px; }

    .buy-btn {
      padding: 8px 20px;
      border: none;
      border-radius: var(--radius-sm);
      background: var(--success);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .buy-btn:hover:not(:disabled) { transform: scale(1.05); }
    .buy-btn:disabled { background: var(--light); cursor: not-allowed; }

    /* =====================================================
       LEADERBOARD
    ===================================================== */
    .leaderboard-container {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 30px;
      border: 1px solid var(--glass-border);
    }

    .leaderboard-header { text-align: center; margin-bottom: 25px; }
    .leaderboard-header h2 { color: var(--white); font-size: 2rem; }

    .leaderboard-table {
      width: 100%;
      border-collapse: collapse;
    }

    .leaderboard-table th {
      color: var(--white);
      padding: 15px;
      text-align: left;
      border-bottom: 2px solid var(--glass-border);
    }

    .leaderboard-table td {
      color: var(--white);
      padding: 15px;
      border-bottom: 1px solid var(--glass-border);
    }

    .leaderboard-table tr:hover { background: rgba(255,255,255,0.1); }

    .rank-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      font-weight: bold;
    }

    .rank-badge.gold { background: linear-gradient(135deg, #FFD700, #FFA500); color: #8B4513; }
    .rank-badge.silver { background: linear-gradient(135deg, #C0C0C0, #A8A8A8); color: #333; }
    .rank-badge.bronze { background: linear-gradient(135deg, #CD7F32, #A0522D); color: white; }
    .rank-badge.normal { background: var(--glass-bg); color: var(--white); }

    /* =====================================================
       ACHIEVEMENTS
    ===================================================== */
    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .achievement-card {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 25px;
      border: 1px solid var(--glass-border);
      display: flex;
      align-items: center;
      gap: 20px;
      transition: all 0.3s ease;
    }

    .achievement-card.unlocked { border-color: var(--success); }
    .achievement-card.locked { opacity: 0.6; }

    .achievement-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
    }

    .achievement-card.unlocked .achievement-icon { background: linear-gradient(135deg, var(--success), #55EFC4); }
    .achievement-card.locked .achievement-icon { background: var(--light); }

    .achievement-info h4 { color: var(--white); margin-bottom: 5px; }
    .achievement-info p { color: var(--light); font-size: 0.9rem; }

    /* =====================================================
       SETTINGS
    ===================================================== */
    .settings-container {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 25px;
      border: 1px solid var(--glass-border);
      max-width: 600px;
      margin: 0 auto;
    }

    .settings-group { margin-bottom: 25px; }
    .settings-group h3 { color: var(--white); margin-bottom: 15px; font-size: 1.1rem; }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background: rgba(255,255,255,0.1);
      border-radius: var(--radius-sm);
      margin-bottom: 10px;
    }

    .setting-item label { color: var(--white); }

    .toggle-switch {
      position: relative;
      width: 50px;
      height: 26px;
    }

    .toggle-switch input { opacity: 0; width: 0; height: 0; }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255,255,255,0.3);
      border-radius: 26px;
      transition: 0.4s;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 3px;
      bottom: 3px;
      background: white;
      border-radius: 50%;
      transition: 0.4s;
    }

    input:checked + .toggle-slider { background: var(--success); }
    input:checked + .toggle-slider:before { transform: translateX(24px); }

    /* =====================================================
       LOGIN & MODALS
    ===================================================== */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-overlay.active { display: flex; }

    .modal {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: var(--radius);
      padding: 40px;
      border: 1px solid var(--glass-border);
      max-width: 400px;
      width: 90%;
      animation: slideUp 0.4s ease;
    }

    @keyframes slideUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .modal h2 { color: var(--white); text-align: center; margin-bottom: 25px; }

    .modal input {
      width: 100%;
      padding: 15px;
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-sm);
      background: rgba(255,255,255,0.1);
      color: var(--white);
      font-size: 1rem;
      margin-bottom: 15px;
    }

    .modal input::placeholder { color: rgba(255,255,255,0.6); }

    .modal button {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
    }

    .modal .primary-btn {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white;
    }

    .game-over-stats { text-align: center; margin: 20px 0; }
    .game-over-stats .stat { color: var(--white); margin: 10px 0; }
    .game-over-stats .stat span { color: var(--accent); font-weight: bold; }

    /* =====================================================
       NOTIFICATIONS
    ===================================================== */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 25px;
      border-radius: var(--radius-sm);
      color: white;
      font-weight: 500;
      z-index: 2000;
      animation: slideIn 0.4s ease;
      max-width: 300px;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .notification.success { background: linear-gradient(135deg, var(--success), #55EFC4); }
    .notification.warning { background: linear-gradient(135deg, var(--warning), #FFEAA7); color: var(--dark); }
    .notification.error { background: linear-gradient(135deg, var(--danger), #FAB1A0); }
    .notification.info { background: linear-gradient(135deg, var(--primary), var(--primary-light)); }

    /* =====================================================
       MOBILE RESPONSIVE
    ===================================================== */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 200;
      padding: 12px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-sm);
      color: white;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .sidebar { transform: translateX(-100%); }
      .sidebar.active { transform: translateX(0); }
      .main-content { margin-left: 0; padding-top: 70px; }
      .mobile-menu-btn { display: block; }
      .dashboard-header { flex-direction: column; text-align: center; }
    }

    .footer {
      text-align: center;
      padding: 20px;
      color: rgba(255,255,255,0.7);
      font-size: 0.85rem;
    }
  </style>
</head>
<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>

  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="logo">Virtual<span>Pet</span>Pro</div>
      <ul class="nav-menu">
        <li class="nav-item"><a href="#" class="nav-link active" data-page="dashboard"><i>üè†</i> Dashboard</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-page="shop"><i>üõí</i> Shop</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-page="leaderboard"><i>üèÜ</i> Leaderboard</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-page="achievements"><i>üéñÔ∏è</i> Achievements</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-page="settings"><i>‚öôÔ∏è</i> Settings</a></li>
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Login Page -->
      <div class="page" id="login-page">
        <div class="modal" style="margin: 100px auto;">
          <h2>üê± Welcome to Virtual Pet Pro!</h2>
          <input type="text" id="username-input" placeholder="Enter your name" maxlength="20">
          <button class="primary-btn" onclick="login()">Start Playing</button>
        </div>
      </div>

      <!-- Dashboard Page -->
      <div class="page active" id="dashboard-page">
        <div class="dashboard-header">
          <div class="user-info">
            <h2>Hello, <span id="player-name">Player</span>!</h2>
            <div class="level-badge">Level <span id="player-level">1</span> | Cats: <span id="cat-count">1</span></div>
          </div>
          <div class="stats-bar">
            <div class="stat-item"><div class="stat-label">XP</div><div class="stat-value" id="player-xp">0</div></div>
            <div class="stat-item"><div class="stat-label">Coins</div><div class="stat-value" id="player-coins">100</div></div>
            <div class="stat-item"><div class="stat-label">Time</div><div class="stat-value" id="play-time">0:00</div></div>
          </div>
        </div>

        <div class="yard-container">
          <!-- Cat House -->
          <div class="cat-house">
            <h3>üè† Rumah Kucing</h3>
            <div class="house-structure">
              <div class="house-roof"></div>
              <div class="house-body">
                <div class="house-window left"></div>
                <div class="house-window right"></div>
                <div class="house-door"></div>
              </div>
            </div>
            <div class="cats-area" id="cats-area">
              <!-- Cats will be rendered here -->
            </div>
          </div>

          <!-- Controls Panel -->
          <div class="controls-panel">
            <h3>üìä Status Kucing</h3>
            <div class="selected-cat-info" id="selected-cat-info">
              <h4 id="selected-cat-name">Pilih kucing</h4>
              <div class="status-item">
                <div class="status-header"><span>üçñ Hunger</span><span id="hunger-value">0%</span></div>
                <div class="progress-bar"><div class="progress-fill" id="hunger-bar" style="width: 0%;"></div></div>
              </div>
              <div class="status-item">
                <div class="status-header"><span>üßº Clean</span><span id="clean-value">0%</span></div>
                <div class="progress-bar"><div class="progress-fill" id="clean-bar" style="width: 0%;"></div></div>
              </div>
              <div class="status-item">
                <div class="status-header"><span>üòä Happy</span><span id="happy-value">0%</span></div>
                <div class="progress-bar"><div class="progress-fill" id="happy-bar" style="width: 0%;"></div></div>
              </div>
              <div class="status-item">
                <div class="status-header"><span>‚ö° Energy</span><span id="energy-value">0%</span></div>
                <div class="progress-bar"><div class="progress-fill" id="energy-bar" style="width: 0%;"></div></div>
              </div>
              <div class="status-item">
                <div class="status-header"><span>‚ù§Ô∏è Health</span><span id="health-value">0%</span></div>
                <div class="progress-bar"><div class="progress-fill" id="health-bar" style="width: 0%;"></div></div>
              </div>
            </div>

            <div class="action-buttons">
              <button class="action-btn feed" onclick="feedCat()"><i>üçñ</i> Feed</button>
              <button class="action-btn clean" onclick="cleanCat()"><i>üõÅ</i> Clean</button>
              <button class="action-btn play" onclick="playWithCat()"><i>üéæ</i> Play</button>
              <button class="action-btn sleep" onclick="sleepCat()"><i>üò¥</i> Sleep</button>
            </div>

            <button class="add-cat-btn" onclick="addNewCat()">‚ûï Tambah Kucing (50 Coins)</button>

            <div class="color-selector">
              <div class="color-btn pink" onclick="setNewCatColor('pink')" title="Pink"></div>
              <div class="color-btn orange" onclick="setNewCatColor('orange')" title="Orange"></div>
              <div class="color-btn grey" onclick="setNewCatColor('grey')" title="Grey"></div>
              <div class="color-btn black" onclick="setNewCatColor('black')" title="Black"></div>
              <div class="color-btn white" onclick="setNewCatColor('white')" title="White"></div>
              <div class="color-btn calico" onclick="setNewCatColor('calico')" title="Calico"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Shop Page -->
      <div class="page" id="shop-page">
        <div class="shop-header">
          <h2>üõí Pet Shop</h2>
          <div class="coin-display"><div class="coin-icon">üí∞</div><span id="shop-coins">100</span></div>
        </div>
        <div class="shop-categories">
          <button class="category-btn active" data-category="food">Food</button>
          <button class="category-btn" data-category="toys">Toys</button>
          <button class="category-btn" data-category="accessories">Accessories</button>
          <button class="category-btn" data-category="catHouse">Cat House</button>
        </div>
        <div class="shop-items" id="shop-items"></div>
      </div>

      <!-- Leaderboard Page -->
      <div class="page" id="leaderboard-page">
        <div class="leaderboard-container">
          <div class="leaderboard-header"><h2>üèÜ Leaderboard</h2></div>
          <table class="leaderboard-table">
            <thead><tr><th>Rank</th><th>Player</th><th>Level</th><th>Cats</th><th>Score</th></tr></thead>
            <tbody id="leaderboard-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Achievements Page -->
      <div class="page" id="achievements-page">
        <div class="achievements-grid" id="achievements-grid"></div>
      </div>

      <!-- Settings Page -->
      <div class="page" id="settings-page">
        <div class="settings-container">
          <div class="settings-group">
            <h3>üîä Sound Settings</h3>
            <div class="setting-item">
              <label>Sound Effects (Besar)</label>
              <label class="toggle-switch">
                <input type="checkbox" id="sfx-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <label>Music</label>
              <label class="toggle-switch">
                <input type="checkbox" id="music-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          <div class="settings-group">
            <h3>üéÆ Game Settings</h3>
            <div class="setting-item">
              <label>Notifications</label>
              <label class="toggle-switch">
                <input type="checkbox" id="notif-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          <div class="settings-group">
            <button class="action-btn" style="width:100%;background:var(--danger);color:white;" onclick="resetGame()">üîÑ Reset Game</button>
          </div>
        </div>
      </div>

      <div class="footer">¬© 2024 Virtual Pet Pro - Game Kucingku</div>
    </main>
  </div>

  <!-- Game Over Modal -->
  <div class="modal-overlay" id="game-over-modal">
    <div class="modal">
      <h2>üò¢ Game Over!</h2>
      <div class="game-over-stats">
        <p class="stat">Waktu: <span id="final-time">0:00</span></p>
        <p class="stat">Level: <span id="final-level">1</span></p>
        <p class="stat">Jumlah Kucing: <span id="final-cats">1</span></p>
        <p class="stat">XP: <span id="final-xp">0</span></p>
      </div>
      <input type="text" id="player-name-input" placeholder="Enter your name" maxlength="20">
      <button class="primary-btn" onclick="submitScore()">Submit Score</button>
    </div>
  </div>

  <!-- Particle Container -->
  <div class="particle-container" id="particle-container"></div>

  <script>
    // ========== AUDIO CONTEXT FOR LOUD SOUNDS ==========
    let audioCtx = null;
    let sfxEnabled = true;
    let musicEnabled = true;

    function initAudio() {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }

    function playSound(type) {
      if (!audioCtx) initAudio();
      if (!sfxEnabled) return;

      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);

      // Louder sounds - gain at 0.8
      gainNode.gain.value = 0.8;

      switch(type) {
        case 'meow':
          oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
          oscillator.frequency.exponentialRampToValueAtTime(400, audioCtx.currentTime + 0.3);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
          oscillator.start(audioCtx.currentTime);
          oscillator.stop(audioCtx.currentTime + 0.5);
          break;
        case 'purr':
          oscillator.type = 'sine';
          oscillator.frequency.setValueAtTime(80, audioCtx.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.8);
          oscillator.start(audioCtx.currentTime);
          oscillator.stop(audioCtx.currentTime + 0.8);
          break;
        case 'happy':
          oscillator.frequency.setValueAtTime(400, audioCtx.currentTime);
          oscillator.frequency.setValueAtTime(600, audioCtx.currentTime + 0.1);
          oscillator.frequency.setValueAtTime(800, audioCtx.currentTime + 0.2);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
          oscillator.start(audioCtx.currentTime);
          oscillator.stop(audioCtx.currentTime + 0.3);
          break;
        case 'levelup':
          oscillator.frequency.setValueAtTime(300, audioCtx.currentTime);
          oscillator.frequency.setValueAtTime(500, audioCtx.currentTime + 0.15);
          oscillator.frequency.setValueAtTime(700, audioCtx.currentTime + 0.3);
          oscillator.frequency.setValueAtTime(900, audioCtx.currentTime + 0.45);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.6);
          oscillator.start(audioCtx.currentTime);
          oscillator.stop(audioCtx.currentTime + 0.6);
          break;
      }
    }

    // ========== GAME STATE ==========
    const gameState = {
      playerName: '',
      level: 1,
      xp: 0,
      coins: 100,
      playTime: 0,
      isPlaying: false,
      isDead: false,
      selectedCatId: 0,
      newCatColor: 'pink',
      cats: [],
      settings: { music: true, sfx: true, notifications: true },
      achievements: {
        firstFiveMinutes: { unlocked: false },
        levelFive: { unlocked: false },
        catCollector: { unlocked: false },
        wealthy: { unlocked: false },
        master: { unlocked: false }
      },
      shopItems: {
        food: [
          { id: 1, name: 'Premium Kibble', price: 50, icon: 'üçñ', boost: 20 },
          { id: 2, name: 'Tasty Fish', price: 75, icon: 'üêü', boost: 30 },
          { id: 3, name: 'Cat Treats', price: 25, icon: 'ü¶¥', boost: 10 },
          { id: 4, name: 'Gourmet Meal', price: 100, icon: 'üçù', boost: 40 }
        ],
        toys: [
          { id: 5, name: 'Ball', price: 30, icon: '‚öΩ', happiness: 15 },
          { id: 6, name: 'Yarn Ball', price: 40, icon: 'üß∂', happiness: 20 },
          { id: 7, name: 'Feather Wand', price: 60, icon: 'ü™∂', happiness: 25 },
          { id: 8, name: 'Laser Pointer', price: 80, icon: 'üî¥', happiness: 30 }
        ],
        accessories: [
          { id: 9, name: 'Red Collar', price: 100, icon: 'üéÄ' },
          { id: 10, name: 'Blue Bandana', price: 120, icon: 'üß£' },
          { id: 11, name: 'Crown', price: 500, icon: 'üëë' },
          { id: 12, name: 'Sunglasses', price: 200, icon: 'üï∂Ô∏è' }
        ],
        catHouse: [
          { id: 13, name: 'Wooden House', price: 200, icon: 'üè†' },
          { id: 14, name: 'Luxury Villa', price: 500, icon: 'üè∞' },
          { id: 15, name: 'Tree House', price: 350, icon: 'üå≥' },
          { id: 16, name: 'Castle', price: 1000, icon: 'üèØ' }
        ]
      }
    };

    let gameLoop = null;
    let timeLoop = null;
    const XP_PER_LEVEL = 500;

    const catNames = ['Mimi', 'Kitty', 'Oyen', 'Garfield', 'Luna', 'Simba', 'Coco', 'Bella', 'Max', 'Lucy'];

    // ========== NAVIGATION ==========
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const page = link.dataset.page;
        showPage(page);
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        link.classList.add('active');
      });
    });

    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(`${pageId}-page`).classList.add('active');
      if (pageId === 'shop') loadShop();
      if (pageId === 'leaderboard') loadLeaderboard();
      if (pageId === 'achievements') loadAchievements();
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }

    // ========== AUTHENTICATION ==========
    function checkSavedGame() {
      const saved = localStorage.getItem('virtualPetProMulti');
      if (saved) {
        const data = JSON.parse(saved);
        Object.assign(gameState, data);
        gameState.isPlaying = true;
        showPage('dashboard');
        startGame();
      } else {
        // Start with one cat
        gameState.cats = [createCat('pink', 'Mimi')];
        showPage('login');
      }
    }

    function login() {
      const nameInput = document.getElementById('username-input');
      const name = nameInput.value.trim();
      if (name.length < 2) {
        showNotification('Masukkan nama yang valid!', 'warning');
        return;
      }
      gameState.playerName = name;
      gameState.isPlaying = true;
      saveGame();
      showPage('dashboard');
      startGame();
      showNotification('Selamat datang, ' + name + '!', 'success');
      playSound('meow');
    }

    function saveGame() {
      localStorage.setItem('virtualPetProMulti', JSON.stringify(gameState));
    }

    function resetGame() {
      if (confirm('Reset semua progress?')) {
        localStorage.removeItem('virtualPetProMulti');
        location.reload();
      }
    }

    // ========== CAT MANAGEMENT ==========
    function createCat(color, name) {
      return {
        id: Date.now() + Math.random(),
        name: name || catNames[Math.floor(Math.random() * catNames.length)],
        color: color,
        hunger: 100,
        cleanliness: 100,
        happiness: 100,
        energy: 100,
        health: 100
      };
    }

    function setNewCatColor(color) {
      gameState.newCatColor = color;
      showNotification('Warna kucing dipilih: ' + color, 'info');
    }

    function addNewCat() {
      if (gameState.coins < 50) {
        showNotification('Coins tidak cukup!', 'error');
        return;
      }
      if (gameState.cats.length >= 10) {
        showNotification('Maximum 10 kucing!', 'warning');
        return;
      }
      gameState.coins -= 50;
      const newCat = createCat(gameState.newCatColor, catNames[Math.floor(Math.random() * catNames.length)]);
      gameState.cats.push(newCat);
      gameState.selectedCatId = newCat.id;
      
      playSound('meow');
      showNotification('Kucing baru ditambahkan! üê±', 'success');
      showLevelUpEffects();
      
      if (gameState.cats >= 5) {
        unlockAchievement('catCollector');
      }
      
      saveGame();
      renderCats();
      updateUI();
    }

    function selectCat(catId) {
      gameState.selectedCatId = catId;
      renderCats();
      updateSelectedCatUI();
    }

    function renderCats() {
      const container = document.getElementById('cats-area');
      container.innerHTML = gameState.cats.map(cat => `
        <div class="cat ${cat.color} ${cat.id === gameState.selectedCatId ? 'selected' : ''}" 
             onclick="selectCat(${cat.id})">
          <div class="cat-ear left"></div>
          <div class="cat-ear right"></div>
          <div class="cat-head">
            <div class="cat-face">
              <div class="cat-eye left"></div>
              <div class="cat-eye right"></div>
              <div class="cat-nose"></div>
              <div class="cat-mouth"></div>
              <div class="cat-whiskers">
                <div class="whisker left-1"></div>
                <div class="whisker left-2"></div>
                <div class="whisker right-1"></div>
                <div class="whisker right-2"></div>
              </div>
            </div>
          </div>
          <div class="cat-body">
            <div class="cat-paw left"></div>
            <div class="cat-paw right"></div>
          </div>
          <div class="cat-tail"></div>
          <div class="zzz">Zzz</div>
        </div>
      `).join('');
      
      document.getElementById('cat-count').textContent = gameState.cats.length;
    }

    function getSelectedCat() {
      return gameState.cats.find(c => c.id === gameState.selectedCatId);
    }

    // ========== GAME ENGINE ==========
    function startGame() {
      renderCats();
      updateUI();
      updateSelectedCatUI();
      
      gameLoop = setInterval(gameTick, 2000);
      timeLoop = setInterval(() => {
        if (gameState.isPlaying && !gameState.isDead) {
          gameState.playTime++;
          updateTimeDisplay();
        }
      }, 1000);
    }

    function gameTick() {
      if (gameState.isDead) return;

      gameState.cats.forEach(cat => {
        cat.hunger = Math.max(0, cat.hunger - 2);
        cat.cleanliness = Math.max(0, cat.cleanliness - 1.5);
        cat.happiness = Math.max(0, cat.happiness - 1);
        cat.energy = Math.max(0, cat.energy - 0.5);

        if (cat.hunger < 20 || cat.cleanliness < 20 || cat.happiness < 20 || cat.energy < 20) {
          cat.health = Math.max(0, cat.health - 1);
        } else if (cat.health < 100) {
          cat.health = Math.min(100, cat.health + 0.5);
        }

        if (cat.health <= 0) {
          // Cat dies - remove from array
          gameState.cats = gameState.cats.filter(c => c.id !== cat.id);
          if (gameState.cats.length === 0) {
            gameOver();
          } else {
            gameState.selectedCatId = gameState.cats[0].id;
          }
        }
      });

      gameState.xp += gameState.cats.length; // More XP with more cats
      checkLevelUp();
      
      renderCats();
      updateUI();
      updateSelectedCatUI();
      saveGame();
    }

    function updateTimeDisplay() {
      const minutes = Math.floor(gameState.playTime / 60);
      const seconds = gameState.playTime % 60;
      document.getElementById('play-time').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    // ========== CAT ACTIONS ==========
    function feedCat() {
      const cat = getSelectedCat();
      if (!cat || gameState.isDead) return;

      cat.hunger = Math.min(100, cat.hunger + 25);
      cat.energy = Math.min(100, cat.energy + 5);
      gameState.xp += 10;
      gameState.coins += 5;
      
      animateCat('bounce');
      playSound('purr');
      showNotification(cat.name + ' makan dengan lahap!', 'success');
      
      checkLevelUp();
      updateUI();
      updateSelectedCatUI();
      saveGame();
    }

    function cleanCat() {
      const cat = getSelectedCat();
      if (!cat || gameState.isDead) return;

      cat.cleanliness = Math.min(100, cat.cleanliness + 30);
      cat.happiness = Math.min(100, cat.happiness + 5);
      gameState.xp += 10;
      gameState.coins += 5;
      
      playSound('happy');
      showNotification(cat.name + ' sudah bersih!', 'success');
      
      checkLevelUp();
      updateUI();
      updateSelectedCatUI();
      saveGame();
    }

    function playWithCat() {
      const cat = getSelectedCat();
      if (!cat || gameState.isDead) return;
      if (cat.energy < 10) {
        showNotification(cat.name + ' terlalu lelah!', 'warning');
        return;
      }

      cat.happiness = Math.min(100, cat.happiness + 25);
      cat.energy = Math.max(0, cat.energy - 15);
      gameState.xp += 15;
      gameState.coins += 10;
      
      animateCat('bounce');
      playSound('happy');
      showNotification(cat.name + ' sangat senang!', 'success');
      
      checkLevelUp();
      updateUI();
      updateSelectedCatUI();
      saveGame();
    }

    function sleepCat() {
      const cat = getSelectedCat();
      if (!cat || gameState.isDead) return;

      cat.energy = Math.min(100, cat.energy + 40);
      cat.hunger = Math.max(0, cat.hunger - 10);
      gameState.xp += 5;
      
      showNotification(cat.name + ' sudah istirahat!', 'success');
      
      updateUI();
      updateSelectedCatUI();
      saveGame();
    }

    function animateCat(animation) {
      const cat = document.querySelector('.cat.selected');
      if (cat) {
        cat.classList.add(animation);
        setTimeout(() => cat.classList.remove(animation), 500);
      }
    }

    // ========== LEVEL & ACHIEVEMENTS ==========
    function checkLevelUp() {
      const requiredXP = gameState.level * XP_PER_LEVEL;
      if (gameState.xp >= requiredXP && gameState.level < 10) {
        gameState.level++;
        gameState.coins += 100;
        playSound('levelup');
        showLevelUpEffects();
        showNotification('üéâ Level Up! Level ' + gameState.level + '!', 'success');
        if (gameState.level >= 5) unlockAchievement('levelFive');
      }
      if (gameState.level >= 10) unlockAchievement('master');
    }

    function showLevelUpEffects() {
      const colors = ['#FFD700', '#FF6B6B', '#48DBFB', '#1DD1A1', '#A29BFE'];
      for (let i = 0; i < 20; i++) {
        setTimeout(() => createParticle(colors), i * 100);
      }
    }

    function createParticle(color) {
      const container = document.getElementById('particle-container');
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.background = color;
      particle.style.left = Math.random() * 100 + 'vw';
      particle.style.top = '-10px';
      particle.style.animationDuration = (Math.random() * 2 + 2) + 's';
      container.appendChild(particle);
      setTimeout(() => particle.remove(), 3000);
    }

    function unlockAchievement(id) {
      if (gameState.achievements[id].unlocked) return;
      gameState.achievements[id].unlocked = true;
      gameState.coins += 50;
      showNotification('üèÜ Achievement Unlocked!', 'success');
      saveGame();
    }

    // ========== UI UPDATES ==========
    function updateUI() {
      document.getElementById('player-name').textContent = gameState.playerName;
      document.getElementById('player-level').textContent = gameState.level;
      document.getElementById('player-xp').textContent = gameState.xp.toLocaleString();
      document.getElementById('player-coins').textContent = gameState.coins;
      document.getElementById('shop-coins').textContent = gameState.coins;
      document.getElementById('cat-count').textContent = gameState.cats.length;
    }

    function updateSelectedCatUI() {
      const cat = getSelectedCat();
      if (!cat) {
        document.getElementById('selected-cat-name').textContent = 'Pilih kucing';
        return;
      }
      
      document.getElementById('selected-cat-name').textContent = 'üê± ' + cat.name;
      
      updateStatBar('hunger', cat.hunger);
      updateStatBar('clean', cat.cleanliness);
      updateStatBar('happy', cat.happiness);
      updateStatBar('energy', cat.energy);
      updateStatBar('health', cat.health);
    }

    function updateStatBar(stat, value) {
      const bar = document.getElementById(`${stat}-bar`);
      const valueEl = document.getElementById(`${stat}-value`);
      bar.style.width = value + '%';
      valueEl.textContent = Math.round(value) + '%';
      bar.className = 'progress-fill';
      if (value >= 60) bar.classList.add('high');
      else if (value >= 30) bar.classList.add('medium');
      else bar.classList.add('low');
    }

    function showNotification(message, type = 'info') {
      if (!gameState.settings.notifications && type !== 'error') return;
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      document.body.appendChild(notification);
      setTimeout(() => notification.remove(), 3000);
    }

    // ========== SHOP ==========
    let currentCategory = 'food';

    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentCategory = btn.dataset.category;
        loadShop();
      });
    });

    function loadShop() {
      const container = document.getElementById('shop-items');
      const items = gameState.shopItems[currentCategory];
      document.getElementById('shop-coins').textContent = gameState.coins;

      container.innerHTML = items.map(item => `
        <div class="shop-item">
          <div class="shop-item-icon">${item.icon}</div>
          <div class="shop-item-name">${item.name}</div>
          <div class="shop-item-price">üí∞ ${item.price}</div>
          <button class="buy-btn" onclick="buyItem('${currentCategory}', ${item.id})"
            ${gameState.coins < item.price ? 'disabled' : ''}>Buy</button>
        </div>
      `).join('');
    }

    function buyItem(category, itemId) {
      const items = gameState.shopItems[category];
      const item = items.find(i => i.id === itemId);

      if (gameState.coins < item.price) {
        showNotification('Coins tidak cukup!', 'error');
        return;
      }

      gameState.coins -= item.price;
      gameState.xp += item.price / 10;
      
      if (category === 'food') {
        const cat = getSelectedCat();
        if (cat) {
          cat.hunger = Math.min(100, cat.hunger + item.boost);
          showNotification('+' + item.boost + ' Hunger!', 'success');
        }
      } else if (category === 'toys') {
        const cat = getSelectedCat();
        if (cat) {
          cat.happiness = Math.min(100, cat.happiness + item.happiness);
          showNotification('+' + item.happiness + ' Happiness!', 'success');
        }
      } else {
        showNotification('Dibeli: ' + item.name + '!', 'success');
      }

      checkLevelUp();
      saveGame();
      loadShop();
    }

    // ========== LEADERBOARD ==========
    function loadLeaderboard() {
      const tbody = document.getElementById('leaderboard-body');
      let leaderboard = JSON.parse(localStorage.getItem('leaderboardMulti') || '[]');
      leaderboard = leaderboard.sort((a, b) => b.score - a.score).slice(0, 10);

      if (leaderboard.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;color:white;">Belum ada skor!</td></tr>';
        return;
      }

      tbody.innerHTML = leaderboard.map((entry, index) => {
        let rankClass = index === 0 ? 'gold' : index === 1 ? 'silver' : index === 2 ? 'bronze' : 'normal';
        return `<tr><td><span class="rank-badge ${rankClass}">${index + 1}</span></td><td>${entry.name}</td><td>${entry.level}</td><td>${entry.cats}</td><td>${entry.score.toLocaleString()}</td></tr>`;
      }).join('');
    }

    function gameOver() {
      gameState.isDead = true;
      gameState.isPlaying = false;
      clearInterval(gameLoop);
      clearInterval(timeLoop);

      const minutes = Math.floor(gameState.playTime / 60);
      const seconds = gameState.playTime % 60;
      document.getElementById('final-time').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      document.getElementById('final-level').textContent = gameState.level;
      document.getElementById('final-cats').textContent = gameState.cats.length;
      document.getElementById('final-xp').textContent = gameState.xp.toLocaleString();
      document.getElementById('player-name-input').value = gameState.playerName;
      document.getElementById('game-over-modal').classList.add('active');
    }

    function submitScore() {
      const name = document.getElementById('player-name-input').value.trim() || gameState.playerName;
      const entry = { name, level: gameState.level, cats: gameState.cats.length, score: gameState.xp };
      let leaderboard = JSON.parse(localStorage.getItem('leaderboardMulti') || '[]');
      leaderboard.push(entry);
      leaderboard = leaderboard.sort((a, b) => b.score - a.score).slice(0, 10);
      localStorage.setItem('leaderboardMulti', JSON.stringify(leaderboard));
      showNotification('Skor disubmit!', 'success');
      document.getElementById('game-over-modal').classList.remove('active');
      setTimeout(() => resetGame(), 2000);
    }

    // ========== ACHIEVEMENTS ==========
    const achievementsList = [
      { id: 'firstFiveMinutes', name: 'Player Sejati', desc: 'Main 5 menit', icon: '‚è∞' },
      { id: 'levelFive', name: 'Level 5', desc: 'Capai level 5', icon: '‚≠ê' },
      { id: 'catCollector', name: 'Kolektor Kucing', desc: 'Punya 5 kucing', icon: 'üê±' },
      { id: 'wealthy', name: 'Kaya', desc: 'Kumpulkan 500 coins', icon: 'üí∞' },
      { id: 'master', name: 'Master', desc: 'Capai level 10', icon: 'üëë' }
    ];

    function loadAchievements() {
      const grid = document.getElementById('achievements-grid');
      grid.innerHTML = achievementsList.map(a => {
        const unlocked = gameState.achievements[a.id].unlocked;
        return `<div class="achievement-card ${unlocked ? 'unlocked' : 'locked'}"><div class="achievement-icon">${a.icon}</div><div class="achievement-info"><h4>${a.name}</h4><p>${a.desc}</p></div></div>`;
      }).join('');
    }

    // ========== SETTINGS ==========
    document.getElementById('sfx-toggle').addEventListener('change', (e) => {
      sfxEnabled = e.target.checked;
      gameState.settings.sfx = e.target.checked;
      if (sfxEnabled) playSound('meow');
      saveGame();
    });

    document.getElementById('music-toggle').addEventListener('change', (e) => {
      musicEnabled = e.target.checked;
      gameState.settings.music = e.target.checked;
      saveGame();
    });

    document.getElementById('notif-toggle').addEventListener('change', (e) => {
      gameState.settings.notifications = e.target.checked;
      saveGame();
    });

    // ========== INIT ==========
    window.onload = () => {
      checkSavedGame();
    };
  </script>
</body>
</html>
