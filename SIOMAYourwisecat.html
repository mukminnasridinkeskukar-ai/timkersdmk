<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Kucing - Virtual Pet Pro</title>
  <style>
    /* =====================================================
       CSS VARIABLES & RESET
    ===================================================== */
    :root {
      --primary: #6C5CE7;
      --primary-light: #A29BFE;
      --secondary: #00CEC9;
      --accent: #FD79A8;
      --warning: #FDCB6E;
      --danger: #E17055;
      --success: #00B894;
      --dark: #2D3436;
      --light: #DFE6E9;
      --white: #FFFFFF;
      --glass-bg: rgba(255, 255, 255, 0.15);
      --glass-border: rgba(255, 255, 255, 0.2);
      --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      --shadow-light: 0 4px 16px 0 rgba(31, 38, 135, 0.2);
      --radius: 20px;
      --radius-sm: 12px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      min-height: 100vh;
      background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      overflow-x: hidden;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* =====================================================
       MAIN LAYOUT
    ===================================================== */
    .app-container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 260px;
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-right: 1px solid var(--glass-border);
      padding: 20px;
      display: flex;
      flex-direction: column;
      position: fixed;
      height: 100vh;
      z-index: 100;
      transition: transform 0.3s ease;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--white);
      text-align: center;
      padding: 20px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .logo span {
      color: var(--accent);
    }

    .nav-menu {
      list-style: none;
      margin-top: 20px;
    }

    .nav-item {
      margin: 8px 0;
    }

    .nav-link {
      display: flex;
      align-items: center;
      padding: 14px 18px;
      color: var(--white);
      text-decoration: none;
      border-radius: var(--radius-sm);
      transition: all 0.3s ease;
      font-weight: 500;
      cursor: pointer;
    }

    .nav-link:hover, .nav-link.active {
      background: rgba(255,255,255,0.2);
      transform: translateX(5px);
    }

    .nav-link i {
      margin-right: 12px;
      font-size: 1.2rem;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      margin-left: 260px;
      padding: 20px;
      min-height: 100vh;
    }

    /* =====================================================
       PAGES
    ===================================================== */
    .page {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .page.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* =====================================================
       GAME DASHBOARD
    ===================================================== */
    .dashboard-header {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 25px;
      margin-bottom: 25px;
      border: 1px solid var(--glass-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .user-info h2 {
      color: var(--white);
      font-size: 1.5rem;
    }

    .user-info .level-badge {
      display: inline-block;
      background: var(--accent);
      color: var(--white);
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      margin-top: 5px;
    }

    .stats-bar {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .stat-item {
      background: rgba(255,255,255,0.2);
      padding: 10px 20px;
      border-radius: var(--radius-sm);
      color: var(--white);
      text-align: center;
    }

    .stat-item .stat-label {
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .stat-item .stat-value {
      font-size: 1.3rem;
      font-weight: 700;
    }

    /* Pet Container */
    .pet-container {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 25px;
    }

    @media (max-width: 1000px) {
      .pet-container {
        grid-template-columns: 1fr;
      }
    }

    /* Pet Display */
    .pet-display {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 30px;
      border: 1px solid var(--glass-border);
      position: relative;
      overflow: hidden;
      min-height: 450px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .pet-area {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 20px auto;
    }

    /* Cat Sprite */
    .cat {
      position: relative;
      width: 120px;
      height: 120px;
      margin: 0 auto;
    }

    .cat-body {
      position: absolute;
      width: 100px;
      height: 80px;
      background: linear-gradient(180deg, #FFB6C1 0%, #FF69B4 100%);
      border-radius: 50px 50px 40px 40px;
      top: 30px;
      left: 10px;
      animation: breathe 3s ease-in-out infinite;
    }

    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.03); }
    }

    .cat-head {
      position: absolute;
      width: 70px;
      height: 60px;
      background: linear-gradient(180deg, #FFB6C1 0%, #FF69B4 100%);
      border-radius: 50%;
      top: 0;
      left: 25px;
      z-index: 2;
    }

    .cat-ear {
      position: absolute;
      width: 25px;
      height: 30px;
      background: #FF69B4;
      top: -10px;
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    }

    .cat-ear.left { left: 5px; transform: rotate(-15deg); }
    .cat-ear.right { right: 5px; transform: rotate(15deg); }

    .cat-face {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 15px;
    }

    .cat-eye {
      position: absolute;
      width: 12px;
      height: 14px;
      background: #2D3436;
      border-radius: 50%;
      top: 10px;
      animation: blink 4s infinite;
    }

    .cat-eye::after {
      content: '';
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      top: 2px;
      left: 2px;
    }

    .cat-eye.left { left: 15px; }
    .cat-eye.right { right: 15px; }

    @keyframes blink {
      0%, 90%, 100% { transform: scaleY(1); }
      95% { transform: scaleY(0.1); }
    }

    .cat-nose {
      position: absolute;
      width: 10px;
      height: 8px;
      background: #E17055;
      border-radius: 50%;
      top: 28px;
      left: 30px;
    }

    .cat-mouth {
      position: absolute;
      top: 35px;
      left: 28px;
      width: 14px;
      height: 8px;
      border: 2px solid #2D3436;
      border-top: none;
      border-radius: 0 0 10px 10px;
    }

    .cat-whiskers {
      position: absolute;
      top: 30px;
      width: 100%;
    }

    .whisker {
      position: absolute;
      width: 20px;
      height: 2px;
      background: #2D3436;
    }

    .whisker.left-1 { left: 0; top: 5px; transform: rotate(-10deg); }
    .whisker.left-2 { left: -2px; top: 12px; transform: rotate(5deg); }
    .whisker.right-1 { right: 0; top: 5px; transform: rotate(10deg); }
    .whisker.right-2 { right: -2px; top: 12px; transform: rotate(-5deg); }

    .cat-tail {
      position: absolute;
      width: 15px;
      height: 50px;
      background: linear-gradient(180deg, #FF69B4 0%, #FFB6C1 100%);
      bottom: 10px;
      right: 0;
      border-radius: 10px;
      transform-origin: bottom center;
      animation: tailWag 2s ease-in-out infinite;
    }

    @keyframes tailWag {
      0%, 100% { transform: rotate(-15deg); }
      50% { transform: rotate(15deg); }
    }

    .cat-paw {
      position: absolute;
      width: 25px;
      height: 20px;
      background: #FFB6C1;
      border-radius: 50%;
      bottom: 0;
    }

    .cat-paw.left { left: 20px; }
    .cat-paw.right { right: 20px; }

    /* Cat Animations */
    .cat.bounce .cat-body {
      animation: bounce 0.5s ease;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    .cat.sleep .cat-eye {
      height: 2px;
      border-radius: 0;
      top: 16px;
    }

    .cat.sleep .zzz {
      display: block;
    }

    .cat.sick .cat-body {
      animation: shake 0.5s infinite;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      75% { transform: translateX(3px); }
    }

    .zzz {
      display: none;
      position: absolute;
      top: -20px;
      right: -30px;
      font-size: 1.5rem;
      color: var(--white);
      font-weight: bold;
      animation: zzz 2s infinite;
    }

    @keyframes zzz {
      0% { opacity: 0; transform: translateY(0); }
      50% { opacity: 1; }
      100% { opacity: 0; transform: translateY(-20px); }
    }

    /* Status Bars */
    .status-panel {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 25px;
      border: 1px solid var(--glass-border);
    }

    .status-panel h3 {
      color: var(--white);
      margin-bottom: 20px;
      font-size: 1.2rem;
    }

    .status-item {
      margin-bottom: 20px;
    }

    .status-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      color: var(--white);
      font-size: 0.9rem;
    }

    .progress-bar {
      width: 100%;
      height: 12px;
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 10px;
      transition: width 0.5s ease, background 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .progress-fill.high { background: linear-gradient(90deg, var(--success), #55EFC4); }
    .progress-fill.medium { background: linear-gradient(90deg, var(--warning), #FFEAA7); }
    .progress-fill.low { background: linear-gradient(90deg, var(--danger), #FAB1A0); }

    /* Action Buttons */
    .action-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-top: 25px;
    }

    .action-btn {
      padding: 15px;
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-family: inherit;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-light);
    }

    .action-btn:active {
      transform: translateY(0);
    }

    .action-btn.feed { background: linear-gradient(135deg, #FF6B6B, #EE5A5A); color: white; }
    .action-btn.clean { background: linear-gradient(135deg, #74B9FF, #0984E3); color: white; }
    .action-btn.play { background: linear-gradient(135deg, #FDCB6E, #F39C12); color: white; }
    .action-btn.sleep { background: linear-gradient(135deg, #A29BFE, #6C5CE7); color: white; }

    .action-btn i {
      font-size: 1.5rem;
    }

    /* =====================================================
       PARTICLE EFFECTS
    ===================================================== */
    .particle-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      animation: particleFall 3s ease-out forwards;
    }

    @keyframes particleFall {
      0% {
        opacity: 1;
        transform: translateY(0) rotate(0deg);
      }
      100% {
        opacity: 0;
        transform: translateY(100vh) rotate(720deg);
      }
    }

    /* =====================================================
       SHOP PAGE
    ===================================================== */
    .shop-header {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 25px;
      border: 1px solid var(--glass-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .shop-header h2 {
      color: var(--white);
    }

    .coin-display {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,0.2);
      padding: 10px 20px;
      border-radius: var(--radius-sm);
      color: var(--white);
    }

    .coin-icon {
      width: 30px;
      height: 30px;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
    }

    .shop-categories {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .category-btn {
      padding: 10px 20px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      color: var(--white);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .category-btn:hover, .category-btn.active {
      background: var(--primary);
      border-color: var(--primary);
    }

    .shop-items {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
    }

    .shop-item {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 20px;
      border: 1px solid var(--glass-border);
      text-align: center;
      transition: all 0.3s ease;
    }

    .shop-item:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow);
    }

    .shop-item-icon {
      font-size: 3rem;
      margin-bottom: 10px;
    }

    .shop-item-name {
      color: var(--white);
      font-weight: 600;
      margin-bottom: 5px;
    }

    .shop-item-price {
      color: var(--warning);
      font-weight: bold;
      margin-bottom: 15px;
    }

    .buy-btn {
      padding: 8px 20px;
      border: none;
      border-radius: var(--radius-sm);
      background: var(--success);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .buy-btn:hover:not(:disabled) {
      transform: scale(1.05);
    }

    .buy-btn:disabled {
      background: var(--light);
      cursor: not-allowed;
    }

    /* =====================================================
       LEADERBOARD PAGE
    ===================================================== */
    .leaderboard-container {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 30px;
      border: 1px solid var(--glass-border);
    }

    .leaderboard-header {
      text-align: center;
      margin-bottom: 25px;
    }

    .leaderboard-header h2 {
      color: var(--white);
      font-size: 2rem;
    }

    .leaderboard-table {
      width: 100%;
      border-collapse: collapse;
    }

    .leaderboard-table th {
      color: var(--white);
      padding: 15px;
      text-align: left;
      border-bottom: 2px solid var(--glass-border);
    }

    .leaderboard-table td {
      color: var(--white);
      padding: 15px;
      border-bottom: 1px solid var(--glass-border);
    }

    .leaderboard-table tr:hover {
      background: rgba(255,255,255,0.1);
    }

    .rank-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      font-weight: bold;
    }

    .rank-badge.gold { background: linear-gradient(135deg, #FFD700, #FFA500); color: #8B4513; }
    .rank-badge.silver { background: linear-gradient(135deg, #C0C0C0, #A8A8A8); color: #333; }
    .rank-badge.bronze { background: linear-gradient(135deg, #CD7F32, #A0522D); color: white; }
    .rank-badge.normal { background: var(--glass-bg); color: var(--white); }

    /* =====================================================
       ACHIEVEMENTS PAGE
    ===================================================== */
    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .achievement-card {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 25px;
      border: 1px solid var(--glass-border);
      display: flex;
      align-items: center;
      gap: 20px;
      transition: all 0.3s ease;
    }

    .achievement-card.unlocked {
      border-color: var(--success);
    }

    .achievement-card.locked {
      opacity: 0.6;
    }

    .achievement-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      flex-shrink: 0;
    }

    .achievement-card.unlocked .achievement-icon {
      background: linear-gradient(135deg, var(--success), #55EFC4);
    }

    .achievement-card.locked .achievement-icon {
      background: var(--light);
    }

    .achievement-info h4 {
      color: var(--white);
      margin-bottom: 5px;
    }

    .achievement-info p {
      color: var(--light);
      font-size: 0.9rem;
    }

    .achievement-progress {
      margin-top: 10px;
      height: 6px;
      background: rgba(255,255,255,0.2);
      border-radius: 3px;
      overflow: hidden;
    }

    .achievement-progress-fill {
      height: 100%;
      background: var(--success);
      border-radius: 3px;
      transition: width 0.5s ease;
    }

    /* =====================================================
       SETTINGS PAGE
    ===================================================== */
    .settings-container {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 25px;
      border: 1px solid var(--glass-border);
      max-width: 600px;
      margin: 0 auto;
    }

    .settings-group {
      margin-bottom: 25px;
    }

    .settings-group h3 {
      color: var(--white);
      margin-bottom: 15px;
      font-size: 1.1rem;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background: rgba(255,255,255,0.1);
      border-radius: var(--radius-sm);
      margin-bottom: 10px;
    }

    .setting-item label {
      color: var(--white);
    }

    .toggle-switch {
      position: relative;
      width: 50px;
      height: 26px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255,255,255,0.3);
      border-radius: 26px;
      transition: 0.4s;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 3px;
      bottom: 3px;
      background: white;
      border-radius: 50%;
      transition: 0.4s;
    }

    input:checked + .toggle-slider {
      background: var(--success);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }

    /* =====================================================
       LOGIN MODAL
    ===================================================== */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: var(--radius);
      padding: 40px;
      border: 1px solid var(--glass-border);
      max-width: 400px;
      width: 90%;
      animation: slideUp 0.4s ease;
    }

    @keyframes slideUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .modal h2 {
      color: var(--white);
      text-align: center;
      margin-bottom: 25px;
    }

    .modal input {
      width: 100%;
      padding: 15px;
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-sm);
      background: rgba(255,255,255,0.1);
      color: var(--white);
      font-size: 1rem;
      margin-bottom: 15px;
    }

    .modal input::placeholder {
      color: rgba(255,255,255,0.6);
    }

    .modal button {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .modal .primary-btn {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white;
    }

    .modal .primary-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    /* Game Over Modal */
    .game-over-stats {
      text-align: center;
      margin: 20px 0;
    }

    .game-over-stats .stat {
      color: var(--white);
      margin: 10px 0;
    }

    .game-over-stats .stat span {
      color: var(--accent);
      font-weight: bold;
    }

    /* =====================================================
       NOTIFICATIONS
    ===================================================== */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 25px;
      border-radius: var(--radius-sm);
      color: white;
      font-weight: 500;
      z-index: 2000;
      animation: slideIn 0.4s ease;
      max-width: 300px;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .notification.success { background: linear-gradient(135deg, var(--success), #55EFC4); }
    .notification.warning { background: linear-gradient(135deg, var(--warning), #FFEAA7); color: var(--dark); }
    .notification.error { background: linear-gradient(135deg, var(--danger), #FAB1A0); }
    .notification.info { background: linear-gradient(135deg, var(--primary), var(--primary-light)); }

    /* =====================================================
       MOBILE RESPONSIVE
    ===================================================== */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 200;
      padding: 12px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-sm);
      color: white;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }

      .sidebar.active {
        transform: translateX(0);
      }

      .main-content {
        margin-left: 0;
        padding-top: 70px;
      }

      .mobile-menu-btn {
        display: block;
      }

      .dashboard-header {
        flex-direction: column;
        text-align: center;
      }

      .action-buttons {
        grid-template-columns: 1fr 1fr;
      }
    }

    /* =====================================================
       BACKGROUND THEMES
    ===================================================== */
    .pet-display.day {
      background: linear-gradient(180deg, #87CEEB 0%, #E0F7FA 100%);
    }

    .pet-display.night {
      background: linear-gradient(180deg, #1A1A2E 0%, #16213E 100%);
    }

    .pet-display.sunset {
      background: linear-gradient(180deg, #FF6B6B 0%, #FFE66D 100%);
    }

    .pet-display.forest {
      background: linear-gradient(180deg, #2ECC71 0%, #A8E6CF 100%);
    }

    .pet-display.beach {
      background: linear-gradient(180deg, #74B9FF 0%, #FEF5E7 100%);
    }

    .pet-display.mountain {
      background: linear-gradient(180deg, #636E72 0%, #B2BEC3 100%);
    }

    .pet-display.space {
      background: linear-gradient(180deg, #0C0C1E 0%, #1A1A3E 100%);
    }

    .pet-display.candy {
      background: linear-gradient(180deg, #FF9FF3 0%, #FECA57 100%);
    }

    .pet-display.ocean {
      background: linear-gradient(180deg, #0984E3 0%, #74B9FF 100%);
    }

    .pet-display.rainbow {
      background: linear-gradient(180deg, #FF6B6B, #FECA57, #48DBFB, #1DD1A1, #5F27CD);
      background-size: 400% 400%;
      animation: gradientBG 5s ease infinite;
    }

    /* =====================================================
       FOOTER
    ===================================================== */
    .footer {
      text-align: center;
      padding: 20px;
      color: rgba(255,255,255,0.7);
      font-size: 0.85rem;
    }
  </style>
</head>
<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" onclick="toggleSidebar()">
    <i class="fas fa-bars">‚ò∞</i>
  </button>

  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="logo">Virtual<span>Pet</span>Pro</div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#" class="nav-link active" data-page="dashboard">
            <i>üè†</i> Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-page="shop">
            <i>üõí</i> Shop
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-page="leaderboard">
            <i>üèÜ</i> Leaderboard
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-page="achievements">
            <i>üéñÔ∏è</i> Achievements
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-page="settings">
            <i>‚öôÔ∏è</i> Settings
          </a>
        </li>
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Login Page -->
      <div class="page" id="login-page">
        <div class="modal" style="margin: 100px auto;">
          <h2>üê± Welcome to Virtual Pet Pro!</h2>
          <input type="text" id="username-input" placeholder="Enter your name" maxlength="20">
          <button class="primary-btn" onclick="login()">Start Playing</button>
        </div>
      </div>

      <!-- Dashboard Page -->
      <div class="page active" id="dashboard-page">
        <div class="dashboard-header">
          <div class="user-info">
            <h2>Hello, <span id="player-name">Player</span>!</h2>
            <div class="level-badge">Level <span id="player-level">1</span></div>
          </div>
          <div class="stats-bar">
            <div class="stat-item">
              <div class="stat-label">XP</div>
              <div class="stat-value" id="player-xp">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Coins</div>
              <div class="stat-value" id="player-coins">100</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Time</div>
              <div class="stat-value" id="play-time">0:00</div>
            </div>
          </div>
        </div>

        <div class="pet-container">
          <div class="pet-display day" id="pet-display">
            <div class="pet-area">
              <div class="cat" id="cat">
                <div class="cat-ear left"></div>
                <div class="cat-ear right"></div>
                <div class="cat-head">
                  <div class="cat-face">
                    <div class="cat-eye left"></div>
                    <div class="cat-eye right"></div>
                    <div class="cat-nose"></div>
                    <div class="cat-mouth"></div>
                    <div class="cat-whiskers">
                      <div class="whisker left-1"></div>
                      <div class="whisker left-2"></div>
                      <div class="whisker right-1"></div>
                      <div class="whisker right-2"></div>
                    </div>
                  </div>
                </div>
                <div class="cat-body">
                  <div class="cat-paw left"></div>
                  <div class="cat-paw right"></div>
                </div>
                <div class="cat-tail"></div>
                <div class="zzz">Zzz</div>
              </div>
            </div>
            <p style="color: var(--white); margin-top: 20px; font-size: 1.1rem;" id="cat-status">Your cat is happy!</p>
          </div>

          <div class="status-panel">
            <h3>üìä Pet Status</h3>
            <div class="status-item">
              <div class="status-header">
                <span>üçñ Hunger</span>
                <span id="hunger-value">100%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill high" id="hunger-bar" style="width: 100%;"></div>
              </div>
            </div>
            <div class="status-item">
              <div class="status-header">
                <span>üßº Cleanliness</span>
                <span id="clean-value">100%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill high" id="clean-bar" style="width: 100%;"></div>
              </div>
            </div>
            <div class="status-item">
              <div class="status-header">
                <span>üòä Happiness</span>
                <span id="happiness-value">100%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill high" id="happiness-bar" style="width: 100%;"></div>
              </div>
            </div>
            <div class="status-item">
              <div class="status-header">
                <span>‚ö° Energy</span>
                <span id="energy-value">100%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill high" id="energy-bar" style="width: 100%;"></div>
              </div>
            </div>
            <div class="status-item">
              <div class="status-header">
                <span>‚ù§Ô∏è Health</span>
                <span id="health-value">100%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill high" id="health-bar" style="width: 100%;"></div>
              </div>
            </div>

            <div class="action-buttons">
              <button class="action-btn feed" onclick="feedCat()">
                <i>üçñ</i> Feed
              </button>
              <button class="action-btn clean" onclick="cleanCat()">
                <i>üõÅ</i> Clean
              </button>
              <button class="action-btn play" onclick="playWithCat()">
                <i>üéæ</i> Play
              </button>
              <button class="action-btn sleep" onclick="sleepCat()">
                <i>üò¥</i> Sleep
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Shop Page -->
      <div class="page" id="shop-page">
        <div class="shop-header">
          <h2>üõí Pet Shop</h2>
          <div class="coin-display">
            <div class="coin-icon">üí∞</div>
            <span id="shop-coins">100</span>
          </div>
        </div>

        <div class="shop-categories">
          <button class="category-btn active" data-category="food">Food</button>
          <button class="category-btn" data-category="toys">Toys</button>
          <button class="category-btn" data-category="accessories">Accessories</button>
          <button class="category-btn" data-category="themes">Themes</button>
        </div>

        <div class="shop-items" id="shop-items">
          <!-- Items will be populated by JS -->
        </div>
      </div>

      <!-- Leaderboard Page -->
      <div class="page" id="leaderboard-page">
        <div class="leaderboard-container">
          <div class="leaderboard-header">
            <h2>üèÜ Leaderboard</h2>
            <p style="color: rgba(255,255,255,0.8);">Top 10 Players</p>
          </div>
          <table class="leaderboard-table">
            <thead>
              <tr>
                <th>Rank</th>
                <th>Player</th>
                <th>Level</th>
                <th>Score</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody id="leaderboard-body">
              <!-- Leaderboard will be populated by JS -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Achievements Page -->
      <div class="page" id="achievements-page">
        <div class="achievements-grid" id="achievements-grid">
          <!-- Achievements will be populated by JS -->
        </div>
      </div>

      <!-- Settings Page -->
      <div class="page" id="settings-page">
        <div class="settings-container">
          <div class="settings-group">
            <h3>üîä Sound Settings</h3>
            <div class="setting-item">
              <label>Background Music</label>
              <label class="toggle-switch">
                <input type="checkbox" id="music-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <label>Sound Effects</label>
              <label class="toggle-switch">
                <input type="checkbox" id="sfx-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>

          <div class="settings-group">
            <h3>üéÆ Game Settings</h3>
            <div class="setting-item">
              <label>Notifications</label>
              <label class="toggle-switch">
                <input type="checkbox" id="notif-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>

          <div class="settings-group">
            <h3>‚öôÔ∏è System</h3>
            <button class="action-btn" style="width: 100%; background: var(--danger); color: white; margin-bottom: 10px;" onclick="resetGame()">
              üîÑ Reset Game
            </button>
          </div>
        </div>
      </div>

      <div class="footer">
        ¬© 2024 Virtual Pet Pro - Smart Cat Care System | Enterprise Edition
      </div>
    </main>
  </div>

  <!-- Game Over Modal -->
  <div class="modal-overlay" id="game-over-modal">
    <div class="modal">
      <h2>üò¢ Game Over!</h2>
      <div class="game-over-stats">
        <p class="stat">You survived for: <span id="final-time">0:00</span></p>
        <p class="stat">Final Level: <span id="final-level">1</span></p>
        <p class="stat">Total XP: <span id="final-xp">0</span></p>
      </div>
      <input type="text" id="player-name-input" placeholder="Enter your name" maxlength="20">
      <button class="primary-btn" onclick="submitScore()">Submit Score</button>
    </div>
  </div>

  <!-- Particle Container -->
  <div class="particle-container" id="particle-container"></div>

  <script>
    // =====================================================
    // GAME STATE
    // =====================================================
    const gameState = {
      playerName: '',
      level: 1,
      xp: 0,
      coins: 100,
      playTime: 0,
      isPlaying: false,
      isDead: false,
      
      // Pet stats (0-100)
      pet: {
        hunger: 100,
        cleanliness: 100,
        happiness: 100,
        energy: 100,
        health: 100
      },

      // Game settings
      settings: {
        music: true,
        sfx: true,
        notifications: true
      },

      // Achievements
      achievements: {
        firstFiveMinutes: { unlocked: false, progress: 0 },
        levelFive: { unlocked: false, progress: 0 },
        perfectCare: { unlocked: false, progress: 0 },
        wealthy: { unlocked: false, progress: 0 },
        master: { unlocked: false, progress: 0 }
      },

      // Inventory
      inventory: {
        food: [],
        toys: [],
        accessories: [],
        themes: []
      },

      // Shop items
      shopItems: {
        food: [
          { id: 1, name: 'Premium Kibble', price: 50, icon: 'üçñ', boost: 20 },
          { id: 2, name: 'Tasty Fish', price: 75, icon: 'üêü', boost: 30 },
          { id: 3, name: 'Cat Treats', price: 25, icon: 'ü¶¥', boost: 10 },
          { id: 4, name: 'Gourmet Meal', price: 100, icon: 'üçù', boost: 40 }
        ],
        toys: [
          { id: 5, name: 'Ball', price: 30, icon: '‚öΩ', happiness: 15 },
          { id: 6, name: 'Yarn Ball', price: 40, icon: 'üß∂', happiness: 20 },
          { id: 7, name: 'Feather Wand', price: 60, icon: 'ü™∂', happiness: 25 },
          { id: 8, name: 'Laser Pointer', price: 80, icon: 'üî¥', happiness: 30 }
        ],
        accessories: [
          { id: 9, name: 'Red Collar', price: 100, icon: 'üéÄ', style: 'red' },
          { id: 10, name: 'Blue Bandana', price: 120, icon: 'üß£', style: 'blue' },
          { id: 11, name: 'Crown', price: 500, icon: 'üëë', style: 'royal' },
          { id: 12, name: 'Sunglasses', price: 200, icon: 'üï∂Ô∏è', style: 'cool' }
        ],
        themes: [
          { id: 13, name: 'Night Theme', price: 150, icon: 'üåô', theme: 'night' },
          { id: 14, name: 'Sunset Theme', price: 150, icon: 'üåÖ', theme: 'sunset' },
          { id: 15, name: 'Forest Theme', price: 150, icon: 'üå≤', theme: 'forest' },
          { id: 16, name: 'Beach Theme', price: 150, icon: 'üèñÔ∏è', theme: 'beach' },
          { id: 17, name: 'Space Theme', price: 300, icon: 'üöÄ', theme: 'space' },
          { id: 18, name: 'Candy Theme', price: 250, icon: 'üç¨', theme: 'candy' },
          { id: 19, name: 'Ocean Theme', price: 200, icon: 'üåä', theme: 'ocean' },
          { id: 20, name: 'Rainbow Theme', price: 500, icon: 'üåà', theme: 'rainbow' }
        ]
      }
    };

    // Game loop
    let gameLoop = null;
    let timeLoop = null;
    const XP_PER_LEVEL = 500;

    // =====================================================
    // NAVIGATION
    // =====================================================
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const page = link.dataset.page;
        showPage(page);
        
        // Update active nav
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        link.classList.add('active');
      });
    });

    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(`${pageId}-page`).classList.add('active');
      
      if (pageId === 'shop') loadShop();
      if (pageId === 'leaderboard') loadLeaderboard();
      if (pageId === 'achievements') loadAchievements();
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }

    // =====================================================
    // AUTHENTICATION
    // =====================================================
    function checkSavedGame() {
      const saved = localStorage.getItem('virtualPetPro');
      if (saved) {
        const data = JSON.parse(saved);
        Object.assign(gameState, data);
        gameState.isPlaying = true;
        showPage('dashboard');
        startGame();
      } else {
        showPage('login');
      }
    }

    function login() {
      const nameInput = document.getElementById('username-input');
      const name = nameInput.value.trim();
      
      if (name.length < 2) {
        showNotification('Please enter a valid name!', 'warning');
        return;
      }

      gameState.playerName = name;
      gameState.isPlaying = true;
      
      saveGame();
      showPage('dashboard');
      startGame();
      showNotification('Welcome, ' + name + '!', 'success');
    }

    function saveGame() {
      localStorage.setItem('virtualPetPro', JSON.stringify(gameState));
    }

    function resetGame() {
      if (confirm('Are you sure you want to reset all progress?')) {
        localStorage.removeItem('virtualPetPro');
        location.reload();
      }
    }

    // =====================================================
    // GAME ENGINE
    // =====================================================
    function startGame() {
      updateUI();
      
      // Main game loop (runs every 2 seconds)
      gameLoop = setInterval(gameTick, 2000);
      
      // Time counter (runs every second)
      timeLoop = setInterval(() => {
        if (gameState.isPlaying && !gameState.isDead) {
          gameState.playTime++;
          updateTimeDisplay();
          checkTimeAchievements();
        }
      }, 1000);
    }

    function gameTick() {
      if (gameState.isDead) return;

      // Decrease stats
      gameState.pet.hunger = Math.max(0, gameState.pet.hunger - 2);
      gameState.pet.cleanliness = Math.max(0, gameState.pet.cleanliness - 1.5);
      gameState.pet.happiness = Math.max(0, gameState.pet.happiness - 1);
      gameState.pet.energy = Math.max(0, gameState.pet.energy - 0.5);

      // Health decreases if other stats are low
      if (gameState.pet.hunger < 20 || gameState.pet.cleanliness < 20 || 
          gameState.pet.happiness < 20 || gameState.pet.energy < 20) {
        gameState.pet.health = Math.max(0, gameState.pet.health - 1);
      } else if (gameState.pet.health < 100) {
        gameState.pet.health = Math.min(100, gameState.pet.health + 0.5);
      }

      // Random events
      if (Math.random() < 0.1) {
        triggerRandomEvent();
      }

      // Check death
      if (gameState.pet.health <= 0) {
        gameOver();
        return;
      }

      // Add XP for survival
      gameState.xp += 1;
      checkLevelUp();
      checkPerfectCareAchievement();

      updateUI();
      updateCatStatus();
      saveGame();
    }

    function updateTimeDisplay() {
      const minutes = Math.floor(gameState.playTime / 60);
      const seconds = gameState.playTime % 60;
      document.getElementById('play-time').textContent = 
        `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    function updateCatStatus() {
      const pet = gameState.pet;
      const statusEl = document.getElementById('cat-status');
      const catEl = document.getElementById('cat');
      
      // Update cat animation class
      catEl.className = 'cat';
      
      if (pet.health < 30) {
        statusEl.textContent = 'Your cat is very sick! Take care of it!';
        catEl.classList.add('sick');
      } else if (pet.energy < 20) {
        statusEl.textContent = 'Your cat is very tired...';
        catEl.classList.add('sleep');
      } else if (pet.hunger < 30) {
        statusEl.textContent = 'Your cat is hungry! Feed it!';
      } else if (pet.happiness > 80 && pet.hunger > 80) {
        statusEl.textContent = 'Your cat is very happy! ‚ù§Ô∏è';
      } else if (pet.happiness < 30) {
        statusEl.textContent = 'Your cat is sad... Play with it!';
      } else {
        statusEl.textContent = 'Your cat is doing well!';
      }
    }

    // =====================================================
    // PET ACTIONS
    // =====================================================
    function feedCat() {
      if (gameState.isDead) return;

      gameState.pet.hunger = Math.min(100, gameState.pet.hunger + 25);
      gameState.pet.energy = Math.min(100, gameState.pet.energy + 5);
      gameState.xp += 10;
      gameState.coins += 5;
      
      animateCat('bounce');
      showNotification('Yum! +25 Hunger!', 'success');
      
      checkLevelUp();
      updateUI();
      saveGame();
    }

    function cleanCat() {
      if (gameState.isDead) return;

      gameState.pet.cleanliness = Math.min(100, gameState.pet.cleanliness + 30);
      gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 5);
      gameState.xp += 10;
      gameState.coins += 5;
      
      showNotification('Sparkly clean! +30 Cleanliness!', 'success');
      
      checkLevelUp();
      updateUI();
      saveGame();
    }

    function playWithCat() {
      if (gameState.isDead) return;
      if (gameState.pet.energy < 10) {
        showNotification('Too tired to play!', 'warning');
        return;
      }

      gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 25);
      gameState.pet.energy = Math.max(0, gameState.pet.energy - 15);
      gameState.xp += 15;
      gameState.coins += 10;
      
      animateCat('bounce');
      showNotification('Fun! +25 Happiness!', 'success');
      
      checkLevelUp();
      updateUI();
      saveGame();
    }

    function sleepCat() {
      if (gameState.isDead) return;

      gameState.pet.energy = Math.min(100, gameState.pet.energy + 40);
      gameState.pet.hunger = Math.max(0, gameState.pet.hunger - 10);
      gameState.xp += 5;
      
      showNotification('Good rest! +40 Energy!', 'success');
      
      updateUI();
      saveGame();
    }

    function animateCat(animation) {
      const cat = document.getElementById('cat');
      cat.classList.add(animation);
      setTimeout(() => cat.classList.remove(animation), 500);
    }

    // =====================================================
    // RANDOM EVENTS
    // =====================================================
    function triggerRandomEvent() {
      const events = ['sick', 'foundCoins', 'rain'];
      const event = events[Math.floor(Math.random() * events.length)];
      
      switch(event) {
        case 'sick':
          gameState.pet.health = Math.max(0, gameState.pet.health - 15);
          gameState.pet.happiness = Math.max(0, gameState.pet.happiness - 10);
          showNotification('Oh no! Your cat got sick!', 'error');
          break;
        case 'foundCoins':
          const coins = Math.floor(Math.random() * 30) + 10;
          gameState.coins += coins;
          gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
          showNotification(`Your cat found ${coins} coins!`, 'success');
          break;
        case 'rain':
          gameState.pet.happiness = Math.max(0, gameState.pet.happiness - 10);
          showNotification('It\'s raining... Your cat is sad.', 'warning');
          break;
      }
    }

    // =====================================================
    // LEVEL & ACHIEVEMENTS
    // =====================================================
    function checkLevelUp() {
      const requiredXP = gameState.level * XP_PER_LEVEL;

      if (gameState.xp >= requiredXP && gameState.level < 10) {
        gameState.level++;
        gameState.coins += 100;
        showLevelUpEffects();
        showNotification(`üéâ Level Up! You are now level ${gameState.level}!`, 'success');

        if (gameState.level >= 5) {
          unlockAchievement('levelFive');
        }
      }
      
      if (gameState.level >= 10) {
        unlockAchievement('master');
      }
    }

    function showLevelUpEffects() {
      const colors = ['#FFD700', '#FF6B6B', '#48DBFB', '#1DD1A1', '#A29BFE'];
      
      for (let i = 0; i < 20; i++) {
        setTimeout(() => createParticle(colors), i * 100);
      }
    }

    function createParticle(color) {
      const container = document.getElementById('particle-container');
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.background = color;
      particle.style.left = Math.random() * 100 + 'vw';
      particle.style.top = '-10px';
      particle.style.animationDuration = (Math.random() * 2 + 2) + 's';
      container.appendChild(particle);
      
      setTimeout(() => particle.remove(), 3000);
    }

    function checkTimeAchievements() {
      const minutes = gameState.playTime / 60;

      if (minutes >= 5 && !gameState.achievements.firstFiveMinutes.unlocked) {
        unlockAchievement('firstFiveMinutes');
      }

      if (gameState.coins >= 500 && !gameState.achievements.wealthy.unlocked) {
        unlockAchievement('wealthy');
      }
    }

    function checkPerfectCareAchievement() {
      const pet = gameState.pet;
      const allHigh = pet.hunger > 90 && pet.cleanliness > 90 && 
                      pet.happiness > 90 && pet.energy > 90 && pet.health > 90;

      if (allHigh && !gameState.achievements.perfectCare.unlocked) {
        unlockAchievement('perfectCare');
      }
    }

    function unlockAchievement(id) {
      if (gameState.achievements[id].unlocked) return;

      gameState.achievements[id].unlocked = true;
      gameState.coins += 50;
      showNotification(`üèÜ Achievement Unlocked!`, 'success');
      saveGame();
    }

    // =====================================================
    // SHOP
    // =====================================================
    let currentCategory = 'food';

    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentCategory = btn.dataset.category;
        loadShop();
      });
    });

    function loadShop() {
      const container = document.getElementById('shop-items');
      const items = gameState.shopItems[currentCategory];

      document.getElementById('shop-coins').textContent = gameState.coins;

      container.innerHTML = items.map(item => `
        <div class="shop-item">
          <div class="shop-item-icon">${item.icon}</div>
          <div class="shop-item-name">${item.name}</div>
          <div class="shop-item-price">üí∞ ${item.price}</div>
          <button class="buy-btn" onclick="buyItem('${currentCategory}', ${item.id})"
            ${gameState.coins < item.price ? 'disabled' : ''}>
            Buy
          </button>
        </div>
      `).join('');
    }

    function buyItem(category, itemId) {
      const items = gameState.shopItems[category];
      const item = items.find(i => i.id === itemId);

      if (gameState.coins < item.price) {
        showNotification('Not enough coins!', 'error');
        return;
      }

      gameState.coins -= item.price;

      if (category === 'food') {
        gameState.pet.hunger = Math.min(100, gameState.pet.hunger + item.boost);
        showNotification(`+${item.boost} Hunger!`, 'success');
      } else if (category === 'toys') {
        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + item.happiness);
        gameState.pet.energy = Math.max(0, gameState.pet.energy - 5);
        showNotification(`+${item.happiness} Happiness!`, 'success');
      } else if (category === 'accessories') {
        gameState.inventory.accessories.push(item);
        showNotification(`Bought ${item.name}!`, 'success');
      } else if (category === 'themes') {
        const display = document.getElementById('pet-display');
        display.className = `pet-display ${item.theme}`;
        showNotification(`Theme changed to ${item.name}!`, 'success');
      }

      gameState.xp += item.price / 10;
      checkLevelUp();
      saveGame();
      loadShop();
    }

    // =====================================================
    // LEADERBOARD
    // =====================================================
    function loadLeaderboard() {
      const tbody = document.getElementById('leaderboard-body');
      let leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '[]');
      
      leaderboard = leaderboard.sort((a, b) => b.score - a.score).slice(0, 10);

      if (leaderboard.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;color:white;">No scores yet. Be the first!</td></tr>';
        return;
      }

      tbody.innerHTML = leaderboard.map((entry, index) => {
        let rankClass = 'normal';
        if (index === 0) rankClass = 'gold';
        else if (index === 1) rankClass = 'silver';
        else if (index === 2) rankClass = 'bronze';

        return `
          <tr>
            <td><span class="rank-badge ${rankClass}">${index + 1}</span></td>
            <td>${entry.name}</td>
            <td>${entry.level}</td>
            <td>${entry.score.toLocaleString()}</td>
            <td>${entry.date || 'Today'}</td>
          </tr>
        `;
      }).join('');
    }

    function gameOver() {
      gameState.isDead = true;
      gameState.isPlaying = false;
      
      clearInterval(gameLoop);
      clearInterval(timeLoop);

      const minutes = Math.floor(gameState.playTime / 60);
      const seconds = gameState.playTime % 60;

      document.getElementById('final-time').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      document.getElementById('final-level').textContent = gameState.level;
      document.getElementById('final-xp').textContent = gameState.xp.toLocaleString();
      document.getElementById('player-name-input').value = gameState.playerName;

      document.getElementById('game-over-modal').classList.add('active');
    }

    async function submitScore() {
      const name = document.getElementById('player-name-input').value.trim() || gameState.playerName;
      
      const entry = {
        name: name,
        level: gameState.level,
        score: gameState.xp,
        xp: gameState.xp
      };

      let leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '[]');
      leaderboard.push(entry);
      leaderboard = leaderboard.sort((a, b) => b.score - a.score).slice(0, 10);
      localStorage.setItem('leaderboard', JSON.stringify(leaderboard));

      showNotification('Score submitted!', 'success');
      document.getElementById('game-over-modal').classList.remove('active');
      
      setTimeout(() => {
        resetGame();
      }, 2000);
    }

    // =====================================================
    // ACHIEVEMENTS
    // =====================================================
    const achievementsList = [
      { id: 'firstFiveMinutes', name: 'Dedicated Player', desc: 'Play for 5 minutes', icon: '‚è∞' },
      { id: 'levelFive', name: 'Rising Star', desc: 'Reach level 5', icon: '‚≠ê' },
      { id: 'perfectCare', name: 'Perfect Care', desc: 'Keep all stats above 90%', icon: 'üíØ' },
      { id: 'wealthy', name: 'Wealthy', desc: 'Collect 500 coins', icon: 'üí∞' },
      { id: 'master', name: 'Pet Master', desc: 'Reach level 10', icon: 'üëë' }
    ];

    function loadAchievements() {
      const grid = document.getElementById('achievements-grid');
      
      grid.innerHTML = achievementsList.map(a => {
        const unlocked = gameState.achievements[a.id].unlocked;
        return `
          <div class="achievement-card ${unlocked ? 'unlocked' : 'locked'}">
            <div class="achievement-icon">${a.icon}</div>
            <div class="achievement-info">
              <h4>${a.name}</h4>
              <p>${a.desc}</p>
              <div class="achievement-progress">
                <div class="achievement-progress-fill" style="width: ${unlocked ? '100' : '0'}%"></div>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    // =====================================================
    // UI UPDATES
    // =====================================================
    function updateUI() {
      // Player info
      document.getElementById('player-name').textContent = gameState.playerName;
      document.getElementById('player-level').textContent = gameState.level;
      document.getElementById('player-xp').textContent = gameState.xp.toLocaleString();
      document.getElementById('player-coins').textContent = gameState.coins;
      document.getElementById('shop-coins').textContent = gameState.coins;

      // Pet stats
      updateStatBar('hunger', gameState.pet.hunger);
      updateStatBar('clean', gameState.pet.cleanliness);
      updateStatBar('happiness', gameState.pet.happiness);
      updateStatBar('energy', gameState.pet.energy);
      updateStatBar('health', gameState.pet.health);
    }

    function updateStatBar(stat, value) {
      const bar = document.getElementById(`${stat}-bar`);
      const valueEl = document.getElementById(`${stat}-value`);
      
      bar.style.width = value + '%';
      valueEl.textContent = Math.round(value) + '%';
      
      bar.className = 'progress-fill';
      if (value >= 60) bar.classList.add('high');
      else if (value >= 30) bar.classList.add('medium');
      else bar.classList.add('low');
    }

    function showNotification(message, type = 'info') {
      if (!gameState.settings.notifications && type !== 'error') return;

      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => notification.remove(), 3000);
    }

    // =====================================================
    // SETTINGS
    // =====================================================
    document.getElementById('music-toggle').addEventListener('change', (e) => {
      gameState.settings.music = e.target.checked;
      saveGame();
    });

    document.getElementById('sfx-toggle').addEventListener('change', (e) => {
      gameState.settings.sfx = e.target.checked;
      saveGame();
    });

    document.getElementById('notif-toggle').addEventListener('change', (e) => {
      gameState.settings.notifications = e.target.checked;
      saveGame();
    });

    // =====================================================
    // INITIALIZATION
    // =====================================================
    window.onload = () => {
      checkSavedGame();
    };
  </script>
</body>
</html>
